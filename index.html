<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Sopwith</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #1a1a1a;
            color: white;
            font-family: 'Courier New', monospace;
            touch-action: manipulation;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
        }
        
        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }
        
        #game-screen {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: #58a4ff;
        }
        
        #ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 20%;
            background-color: #5a3d22;
            border-top: 4px solid #3d2a16;
        }
        
        #player {
            position: absolute;
            font-size: 24px;
            z-index: 10;
        }
        
        .cloud {
            position: absolute;
            font-size: 32px;
            color: white;
            z-index: 1;
        }
        
        .building {
            position: absolute;
            bottom: 20%;
            font-size: 16px;
            z-index: 2;
        }
        
        .bullet {
            position: absolute;
            font-size: 12px;
            z-index: 5;
        }
        
        .enemy {
            position: absolute;
            font-size: 24px;
            z-index: 8;
        }
        
        .explosion {
            position: absolute;
            font-size: 24px;
            z-index: 20;
            animation: explode 0.5s forwards;
        }
        
        @keyframes explode {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(3); opacity: 0; }
        }
        
        #hud {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 100;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 5px 10px;
            border-radius: 5px;
        }
        
        #game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 200;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            display: none;
        }
        
        #start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 300;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        button {
            background-color: #5a3d22;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            cursor: pointer;
        }
        
        button:hover {
            background-color: #3d2a16;
        }
        
        .controls {
            margin-top: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="game-screen">
            <div id="ground"></div>
            <div id="player">✈</div>
        </div>
        
        <div id="hud">
            <div>Score: <span id="score">0</span></div>
            <div>Health: <span id="health">100</span>%</div>
            <div>Ammo: <span id="ammo">50</span></div>
        </div>
        
        <div id="game-over">
            <h2>Game Over</h2>
            <p>Your score: <span id="final-score">0</span></p>
            <button id="restart-btn">Play Again</button>
        </div>
        
        <div id="start-screen">
            <h1>Minecraft Sopwith</h1>
            <p>A simple 2D flying game in Minecraft style</p>
            <button id="start-btn">Start Game</button>
            
            <div class="controls">
                <h3>Controls:</h3>
                <p>W/⬆ - Move Up</p>
                <p>S/⬇ - Move Down</p>
                <p>A/⬅ - Move Left</p>
                <p>D/➡ - Move Right</p>
                <p>Space - Shoot</p>
                <p>R - Reload</p>
            </div>
        </div>
    </div>

    <script>
        // Game state
        const gameState = {
            player: {
                x: 100,
                y: 200,
                speed: 5,
                health: 100,
                ammo: 50,
                maxAmmo: 50,
                reloading: false,
                direction: 1 // 1 for right, -1 for left
            },
            score: 0,
            enemies: [],
            bullets: [],
            clouds: [],
            buildings: [],
            explosions: [],
            keys: {},
            gameRunning: false,
            lastTime: 0,
            enemySpawnTimer: 0,
            cloudSpawnTimer: 0,
            buildingSpawnTimer: 0
        };

        // DOM elements
        const elements = {
            gameScreen: document.getElementById('game-screen'),
            player: document.getElementById('player'),
            ground: document.getElementById('ground'),
            hud: {
                score: document.getElementById('score'),
                health: document.getElementById('health'),
                ammo: document.getElementById('ammo')
            },
            gameOver: document.getElementById('game-over'),
            finalScore: document.getElementById('final-score'),
            startScreen: document.getElementById('start-screen'),
            startBtn: document.getElementById('start-btn'),
            restartBtn: document.getElementById('restart-btn')
        };

        // Game characters (Minecraft-style)
        const chars = {
            player: ['✈', '🛩'],
            enemy: ['🛸', '🚁'],
            cloud: ['☁️', '🌥', '🌤'],
            building: ['🏠', '🏢', '🏭', '🏛'],
            bullet: '•',
            explosion: '💥'
        };

        // Initialize game
        function initGame() {
            // Clear any existing game elements
            clearGameElements();
            
            // Reset game state
            gameState.player = {
                x: 100,
                y: 200,
                speed: 5,
                health: 100,
                ammo: 50,
                maxAmmo: 50,
                reloading: false,
                direction: 1
            };
            gameState.score = 0;
            gameState.enemies = [];
            gameState.bullets = [];
            gameState.clouds = [];
            gameState.buildings = [];
            gameState.explosions = [];
            gameState.keys = {};
            gameState.gameRunning = true;
            gameState.lastTime = 0;
            gameState.enemySpawnTimer = 0;
            gameState.cloudSpawnTimer = 0;
            gameState.buildingSpawnTimer = 0;
            
            // Update HUD
            updateHUD();
            
            // Hide game over screen
            elements.gameOver.style.display = 'none';
            
            // Start game loop
            requestAnimationFrame(gameLoop);
        }

        // Clear all game elements
        function clearGameElements() {
            document.querySelectorAll('.cloud, .building, .bullet, .enemy, .explosion').forEach(el => el.remove());
        }

        // Update HUD
        function updateHUD() {
            elements.hud.score.textContent = gameState.score;
            elements.hud.health.textContent = gameState.player.health;
            elements.hud.ammo.textContent = gameState.player.ammo;
        }

        // Spawn a cloud
        function spawnCloud() {
            const cloud = document.createElement('div');
            cloud.className = 'cloud';
            cloud.textContent = chars.cloud[Math.floor(Math.random() * chars.cloud.length)];
            
            const y = Math.random() * 60 + 10; // 10-70% from top
            const size = Math.random() * 20 + 20; // 20-40px
            
            cloud.style.top = `${y}%`;
            cloud.style.left = '100%';
            cloud.style.fontSize = `${size}px`;
            
            elements.gameScreen.appendChild(cloud);
            
            gameState.clouds.push({
                element: cloud,
                x: window.innerWidth,
                y: y,
                speed: Math.random() * 2 + 1
            });
        }

        // Spawn a building
        function spawnBuilding() {
            const building = document.createElement('div');
            building.className = 'building';
            building.textContent = chars.building[Math.floor(Math.random() * chars.building.length)];
            
            const height = Math.floor(Math.random() * 3 + 2); // 2-4 lines tall
            building.style.lineHeight = '1';
            building.style.whiteSpace = 'pre';
            building.textContent = Array(height).fill(building.textContent).join('\n');
            
            building.style.left = '100%';
            
            elements.gameScreen.appendChild(building);
            
            const buildingWidth = 30;
            const buildingHeight = height * 16;
            
            gameState.buildings.push({
                element: building,
                x: window.innerWidth,
                y: window.innerHeight * 0.8 - buildingHeight,
                width: buildingWidth,
                height: buildingHeight,
                speed: 2
            });
        }

        // Spawn an enemy
        function spawnEnemy() {
            const enemy = document.createElement('div');
            enemy.className = 'enemy';
            enemy.textContent = chars.enemy[Math.floor(Math.random() * chars.enemy.length)];
            
            const y = Math.random() * (window.innerHeight * 0.6) + 50; // 50px to 60% of screen height
            const speed = Math.random() * 3 + 2; // 2-5 speed
            
            enemy.style.top = `${y}px`;
            enemy.style.left = '100%';
            
            elements.gameScreen.appendChild(enemy);
            
            gameState.enemies.push({
                element: enemy,
                x: window.innerWidth,
                y: y,
                speed: speed,
                health: 3,
                fireTimer: Math.floor(Math.random() * 100) + 50
            });
        }

        // Player shoot
        function playerShoot() {
            if (gameState.player.ammo <= 0) {
                if (!gameState.player.reloading) {
                    gameState.player.reloading = true;
                    setTimeout(() => {
                        gameState.player.ammo = gameState.player.maxAmmo;
                        gameState.player.reloading = false;
                        updateHUD();
                    }, 2000);
                }
                return;
            }
            
            gameState.player.ammo--;
            updateHUD();
            
            const bullet = document.createElement('div');
            bullet.className = 'bullet';
            bullet.textContent = chars.bullet;
            
            bullet.style.top = `${gameState.player.y + 12}px`;
            bullet.style.left = `${gameState.player.x + (gameState.player.direction === 1 ? 24 : -12)}px`;
            
            elements.gameScreen.appendChild(bullet);
            
            gameState.bullets.push({
                element: bullet,
                x: gameState.player.x + (gameState.player.direction === 1 ? 24 : -12),
                y: gameState.player.y + 12,
                speed: 10 * gameState.player.direction,
                isPlayer: true
            });
        }

        // Enemy shoot
        function enemyShoot(enemy) {
            const bullet = document.createElement('div');
            bullet.className = 'bullet';
            bullet.textContent = chars.bullet;
            
            bullet.style.top = `${enemy.y + 12}px`;
            bullet.style.left = `${enemy.x - 12}px`;
            
            elements.gameScreen.appendChild(bullet);
            
            gameState.bullets.push({
                element: bullet,
                x: enemy.x - 12,
                y: enemy.y + 12,
                speed: -7,
                isPlayer: false
            });
        }

        // Create explosion
        function createExplosion(x, y) {
            const explosion = document.createElement('div');
            explosion.className = 'explosion';
            explosion.textContent = chars.explosion;
            
            explosion.style.top = `${y}px`;
            explosion.style.left = `${x}px`;
            
            elements.gameScreen.appendChild(explosion);
            
            gameState.explosions.push({
                element: explosion,
                x: x,
                y: y,
                timer: 30
            });
            
            // Play explosion sound (simple beep)
            playSound(200, 0.1, 0.05);
        }

        // Simple sound effect
        function playSound(frequency, volume, duration) {
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            oscillator.type = 'square';
            oscillator.frequency.value = frequency;
            gainNode.gain.value = volume;
            
            oscillator.start();
            gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);
            oscillator.stop(audioCtx.currentTime + duration);
        }

        // Check collisions
        function checkCollisions() {
            // Player bullets with enemies
            for (let i = gameState.bullets.length - 1; i >= 0; i--) {
                const bullet = gameState.bullets[i];
                
                if (bullet.isPlayer) {
                    for (let j = gameState.enemies.length - 1; j >= 0; j--) {
                        const enemy = gameState.enemies[j];
                        
                        if (bullet.x < enemy.x + 24 && 
                            bullet.x + 12 > enemy.x && 
                            bullet.y < enemy.y + 24 && 
                            bullet.y + 12 > enemy.y) {
                            
                            // Hit enemy
                            enemy.health--;
                            
                            // Remove bullet
                            bullet.element.remove();
                            gameState.bullets.splice(i, 1);
                            
                            if (enemy.health <= 0) {
                                // Enemy destroyed
                                createExplosion(enemy.x, enemy.y);
                                enemy.element.remove();
                                gameState.enemies.splice(j, 1);
                                gameState.score += 100;
                                updateHUD();
                                playSound(300, 0.2, 0.1);
                            } else {
                                playSound(400, 0.1, 0.05);
                            }
                            
                            break;
                        }
                    }
                } else {
                    // Enemy bullets with player
                    if (bullet.x < gameState.player.x + 24 && 
                        bullet.x + 12 > gameState.player.x && 
                        bullet.y < gameState.player.y + 24 && 
                        bullet.y + 12 > gameState.player.y) {
                    
                        // Hit player
                        gameState.player.health -= 10;
                        updateHUD();
                        
                        // Remove bullet
                        bullet.element.remove();
                        gameState.bullets.splice(i, 1);
                        
                        createExplosion(gameState.player.x, gameState.player.y);
                        playSound(100, 0.2, 0.1);
                        
                        if (gameState.player.health <= 0) {
                            gameOver();
                        }
                    }
                }
            }
            
            // Player with enemies
            for (let i = gameState.enemies.length - 1; i >= 0; i--) {
                const enemy = gameState.enemies[i];
                
                if (gameState.player.x < enemy.x + 24 && 
                    gameState.player.x + 24 > enemy.x && 
                    gameState.player.y < enemy.y + 24 && 
                    gameState.player.y + 24 > enemy.y) {
                
                    // Collision with enemy
                    gameState.player.health -= 20;
                    updateHUD();
                    
                    createExplosion(enemy.x, enemy.y);
                    createExplosion(gameState.player.x, gameState.player.y);
                    
                    enemy.element.remove();
                    gameState.enemies.splice(i, 1);
                    
                    playSound(80, 0.3, 0.2);
                    
                    if (gameState.player.health <= 0) {
                        gameOver();
                        break;
                    }
                }
            }
            
            // Player with buildings
            for (let i = gameState.buildings.length - 1; i >= 0; i--) {
                const building = gameState.buildings[i];
                
                if (gameState.player.x < building.x + building.width && 
                    gameState.player.x + 24 > building.x && 
                    gameState.player.y < building.y + building.height && 
                    gameState.player.y + 24 > building.y) {
                
                    // Collision with building
                    gameState.player.health -= 30;
                    updateHUD();
                    
                    createExplosion(building.x + building.width/2, building.y + building.height/2);
                    createExplosion(gameState.player.x, gameState.player.y);
                    
                    building.element.remove();
                    gameState.buildings.splice(i, 1);
                    
                    playSound(60, 0.4, 0.3);
                    
                    if (gameState.player.health <= 0) {
                        gameOver();
                        break;
                    }
                }
            }
        }

        // Game over
        function gameOver() {
            gameState.gameRunning = false;
            elements.finalScore.textContent = gameState.score;
            elements.gameOver.style.display = 'block';
        }

        // Game loop
        function gameLoop(timestamp) {
            if (!gameState.gameRunning) return;
            
            const deltaTime = timestamp - gameState.lastTime;
            gameState.lastTime = timestamp;
            
            // Handle player input
            if (gameState.keys['ArrowUp'] || gameState.keys['w']) {
                gameState.player.y = Math.max(0, gameState.player.y - gameState.player.speed);
            }
            if (gameState.keys['ArrowDown'] || gameState.keys['s']) {
                gameState.player.y = Math.min(window.innerHeight * 0.8 - 24, gameState.player.y + gameState.player.speed);
            }
            if (gameState.keys['ArrowLeft'] || gameState.keys['a']) {
                gameState.player.x = Math.max(0, gameState.player.x - gameState.player.speed);
                gameState.player.direction = -1;
            }
            if (gameState.keys['ArrowRight'] || gameState.keys['d']) {
                gameState.player.x = Math.min(window.innerWidth - 24, gameState.player.x + gameState.player.speed);
                gameState.player.direction = 1;
            }
            
            // Update player element
            elements.player.style.left = `${gameState.player.x}px`;
            elements.player.style.top = `${gameState.player.y}px`;
            elements.player.textContent = gameState.player.direction === 1 ? chars.player[0] : chars.player[1];
            
            // Spawn enemies
            gameState.enemySpawnTimer += deltaTime;
            if (gameState.enemySpawnTimer > 2000) {
                gameState.enemySpawnTimer = 0;
                if (Math.random() < 0.7) { // 70% chance to spawn
                    spawnEnemy();
                }
            }
            
            // Spawn clouds
            gameState.cloudSpawnTimer += deltaTime;
            if (gameState.cloudSpawnTimer > 3000) {
                gameState.cloudSpawnTimer = 0;
                if (Math.random() < 0.5) { // 50% chance to spawn
                    spawnCloud();
                }
            }
            
            // Spawn buildings
            gameState.buildingSpawnTimer += deltaTime;
            if (gameState.buildingSpawnTimer > 5000) {
                gameState.buildingSpawnTimer = 0;
                if (Math.random() < 0.4) { // 40% chance to spawn
                    spawnBuilding();
                }
            }
            
            // Update clouds
            for (let i = gameState.clouds.length - 1; i >= 0; i--) {
                const cloud = gameState.clouds[i];
                cloud.x -= cloud.speed;
                cloud.element.style.left = `${cloud.x}px`;
                
                if (cloud.x < -50) {
                    cloud.element.remove();
                    gameState.clouds.splice(i, 1);
                }
            }
            
            // Update buildings
            for (let i = gameState.buildings.length - 1; i >= 0; i--) {
                const building = gameState.buildings[i];
                building.x -= building.speed;
                building.element.style.left = `${building.x}px`;
                
                if (building.x < -building.width) {
                    building.element.remove();
                    gameState.buildings.splice(i, 1);
                }
            }
            
            // Update enemies
            for (let i = 0; i < gameState.enemies.length; i++) {
                const enemy = gameState.enemies[i];
                
                // Move enemy
                enemy.x -= enemy.speed;
                enemy.element.style.left = `${enemy.x}px`;
                
                // Random vertical movement
                if (Math.random() < 0.05) {
                    enemy.y = Math.max(50, Math.min(window.innerHeight * 0.6, enemy.y + (Math.random() * 40 - 20)));
                    enemy.element.style.top = `${enemy.y}px`;
                }
                
                // Enemy shooting
                enemy.fireTimer -= deltaTime;
                if (enemy.fireTimer <= 0) {
                    enemyShoot(enemy);
                    enemy.fireTimer = Math.floor(Math.random() * 100) + 100;
                }
                
                // Remove if off screen
                if (enemy.x < -24) {
                    enemy.element.remove();
                    gameState.enemies.splice(i, 1);
                    i--;
                }
            }
            
            // Update bullets
            for (let i = gameState.bullets.length - 1; i >= 0; i--) {
                const bullet = gameState.bullets[i];
                bullet.x += bullet.speed;
                bullet.element.style.left = `${bullet.x}px`;
                
                // Remove if off screen
                if (bullet.x < -12 || bullet.x > window.innerWidth + 12) {
                    bullet.element.remove();
                    gameState.bullets.splice(i, 1);
                }
            }
            
            // Update explosions
            for (let i = gameState.explosions.length - 1; i >= 0; i--) {
                const explosion = gameState.explosions[i];
                explosion.timer -= deltaTime;
                
                if (explosion.timer <= 0) {
                    explosion.element.remove();
                    gameState.explosions.splice(i, 1);
                }
            }
            
            // Check collisions
            checkCollisions();
            
            // Continue game loop
            requestAnimationFrame(gameLoop);
        }

        // Event listeners
        document.addEventListener('keydown', (e) => {
            gameState.keys[e.key] = true;
            
            if (e.key === ' ' && gameState.gameRunning) {
                playerShoot();
            }
            
            if (e.key === 'r' && gameState.gameRunning && !gameState.player.reloading) {
                gameState.player.reloading = true;
                setTimeout(() => {
                    gameState.player.ammo = gameState.player.maxAmmo;
                    gameState.player.reloading = false;
                    updateHUD();
                }, 2000);
            }
        });
        
        document.addEventListener('keyup', (e) => {
            gameState.keys[e.key] = false;
        });
        
        // Touch controls for mobile
        let touchStartX = 0;
        let touchStartY = 0;
        
        document.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
            
            // If touch is on the right side of the screen, treat as shoot
            if (gameState.gameRunning && touchStartX > window.innerWidth * 0.6) {
                playerShoot();
            }
        });
        
        document.addEventListener('touchmove', (e) => {
            if (!gameState.gameRunning) return;
            
            const touchX = e.touches[0].clientX;
            const touchY = e.touches[0].clientY;
            
            const deltaX = touchX - touchStartX;
            const deltaY = touchY - touchStartY;
            
            // Move player based on touch movement
            gameState.player.x = Math.max(0, Math.min(window.innerWidth - 24, gameState.player.x + deltaX));
            gameState.player.y = Math.max(0, Math.min(window.innerHeight * 0.8 - 24, gameState.player.y + deltaY));
            
            // Update direction
            if (deltaX > 0) {
                gameState.player.direction = 1;
            } else if (deltaX < 0) {
                gameState.player.direction = -1;
            }
            
            touchStartX = touchX;
            touchStartY = touchY;
            
            e.preventDefault();
        });
        
        // Start game button
        elements.startBtn.addEventListener('click', () => {
            elements.startScreen.style.display = 'none';
            initGame();
        });
        
        // Restart game button
        elements.restartBtn.addEventListener('click', () => {
            elements.gameOver.style.display = 'none';
            initGame();
        });
        
        // Initialize game screen size
        function resizeGame() {
            const gameScreen = elements.gameScreen;
            gameScreen.style.width = `${window.innerWidth}px`;
            gameScreen.style.height = `${window.innerHeight}px`;
            
            // Adjust ground height
            elements.ground.style.height = `${window.innerHeight * 0.2}px`;
            
            // Reset player position if game is running
            if (gameState.gameRunning) {
                gameState.player.y = Math.min(gameState.player.y, window.innerHeight * 0.8 - 24);
                elements.player.style.top = `${gameState.player.y}px`;
            }
        }
        
        window.addEventListener('resize', resizeGame);
        resizeGame();
    </script>
</body>
</html>