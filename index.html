<!DOCTYPE html>
<html>
<head>
    <title>Cosmic Cow Hunt</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        #gameContainer {
            position: relative;
        }
        canvas {
            border: 1px solid #333;
        }
        .menu {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #fff;
            z-index: 2;
        }
        button {
            padding: 10px 20px;
            font-size: 20px;
            background: #4CAF50;
            border: none;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background: #45a049;
        }
        #score {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #fff;
            font-size: 24px;
            z-index: 1;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="background"></canvas>
        <canvas id="gameCanvas"></canvas>
        <div class="menu" id="mainMenu">
            <h1>Cosmic Cow Hunt</h1>
            <button onclick="startGame()">Start Game</button>
        </div>
        <div id="score">Score: 0</div>
    </div>

<script>
const config = {
    cowSpeed: 2,
    spawnInterval: 1500,
    maxCows: 7,
    starCount: 100
};

let canvas, ctx, bgCanvas, bgCtx;
let cows = [];
let score = 0;
let stars = [];
let animationFrameId;
let lastSpawn = 0;

function init() {
    canvas = document.getElementById('gameCanvas');
    ctx = canvas.getContext('2d');
    bgCanvas = document.getElementById('background');
    bgCtx = bgCanvas.getContext('2d');
    
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);
    canvas.addEventListener('click', handleClick);
    
    createStars();
    gameLoop();
}

function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    bgCanvas.width = window.innerWidth;
    bgCanvas.height = window.innerHeight;
}

function createStars() {
    stars = [];
    for(let i = 0; i < config.starCount; i++) {
        stars.push({
            x: Math.random() * bgCanvas.width,
            y: Math.random() * bgCanvas.height,
            size: Math.random() * 2,
            alpha: Math.random()
        });
    }
}

function drawBackground() {
    bgCtx.fillStyle = '#000';
    bgCtx.fillRect(0, 0, bgCanvas.width, bgCanvas.height);
    
    stars.forEach(star => {
        bgCtx.fillStyle = `rgba(255, 255, 255, ${star.alpha})`;
        bgCtx.beginPath();
        bgCtx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
        bgCtx.fill();
    });
}

function Cow() {
    this.x = Math.random() < 0.5 ? -50 : canvas.width + 50;
    this.y = Math.random() * (canvas.height - 100);
    this.speed = config.cowSpeed * (Math.random() * 0.5 + 0.75);
    this.angle = Math.random() * Math.PI * 2;
    this.frame = 0;
    this.width = 60;
    this.height = 40;
}

Cow.prototype.update = function() {
    this.x += Math.cos(this.angle) * this.speed;
    this.y += Math.sin(this.angle) * this.speed;
    this.frame = (this.frame + 0.2) % 4;
};

function drawCow(cow) {
    ctx.save();
    ctx.translate(cow.x, cow.y);
    
    // Тело коровы
    ctx.fillStyle = '#fff';
    ctx.beginPath();
    ctx.ellipse(0, 0, cow.width/2, cow.height/2, 0, 0, Math.PI * 2);
    ctx.fill();
    
    // Крылья
    ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
    const wingY = Math.sin(cow.frame) * 5;
    ctx.beginPath();
    ctx.ellipse(-15, wingY, 10, 20, Math.PI/4, 0, Math.PI * 2);
    ctx.ellipse(15, wingY, 10, 20, -Math.PI/4, 0, Math.PI * 2);
    ctx.fill();
    
    ctx.restore();
}

function spawnCow() {
    if(cows.length < config.maxCows) {
        cows.push(new Cow());
    }
}

function handleClick(e) {
    const rect = canvas.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;
    
    cows.forEach((cow, index) => {
        const dist = Math.hypot(mouseX - cow.x, mouseY - cow.y);
        if(dist < cow.width) {
            cows.splice(index, 1);
            score += 100;
            document.getElementById('score').textContent = `Score: ${score}`;
        }
    });
}

function gameLoop(timestamp) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawBackground();
    
    if(timestamp - lastSpawn > config.spawnInterval) {
        spawnCow();
        lastSpawn = timestamp;
    }
    
    cows.forEach((cow, index) => {
        cow.update();
        drawCow(cow);
        
        if(cow.x < -100 || cow.x > canvas.width + 100 || 
           cow.y < -100 || cow.y > canvas.height + 100) {
            cows.splice(index, 1);
        }
    });
    
    animationFrameId = requestAnimationFrame(gameLoop);
}

function startGame() {
    document.getElementById('mainMenu').style.display = 'none';
    score = 0;
    cows = [];
    document.getElementById('score').textContent = 'Score: 0';
    lastSpawn = 0;
    if(animationFrameId) cancelAnimationFrame(animationFrameId);
    gameLoop();
}

window.onload = init;
</script>
</body>
</html>