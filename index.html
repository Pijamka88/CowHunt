<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Cow Hunt</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        canvas {
            border: 2px solid white;
        }
        #menu {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
        }
        #start-button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        #game-info {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div id="menu">
        <h1>Cosmic Cow Hunt</h1>
        <button id="start-button">Start Game</button>
    </div>
    <div id="game-info">
        <div>Score: <span id="score-display">0</span></div>
        <div>Time: <span id="time-display">60</span></div>
        <div>Ammo: <span id="ammo-display">20</span></div>
    </div>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const menu = document.getElementById('menu');
        const startButton = document.getElementById('start-button');
        const scoreDisplay = document.getElementById('score-display');
        const timeDisplay = document.getElementById('time-display');
        const ammoDisplay = document.getElementById('ammo-display');

        let score = 0;
        let timeLeft = 60;
        let ammo = 20;
        let cows = [];
        let gameRunning = false;
        let gameInterval;
        let level = 1;

        canvas.width = window.innerWidth * 0.8;
        canvas.height = window.innerHeight * 0.8;

        // Cow types
        const cowTypes = [
            { width: 50, height: 50, speed: 2, score: 10, color: 'brown' }, // Normal
            { width: 70, height: 70, speed: 1.5, score: 20, color: 'darkred' }, // Big
            { width: 30, height: 30, speed: 3, score: 30, color: 'lightgray' }  // Small
        ];

        // Function to draw a cow
        function drawCow(cow) {
            ctx.fillStyle = cow.type.color;
            // Body
            ctx.fillRect(cow.x, cow.y, cow.type.width, cow.type.height);

            // Head
            ctx.fillStyle = 'white'; // Head color
            ctx.fillRect(cow.x + cow.type.width - 15, cow.y - 10, 15, 10);

            // Wings (simplified)
            ctx.fillStyle = 'gray';
            ctx.beginPath();
            ctx.moveTo(cow.x, cow.y);
            ctx.lineTo(cow.x - 10, cow.y - 20);
            ctx.lineTo(cow.x + 10, cow.y);
            ctx.closePath();
            ctx.fill();

            ctx.beginPath();
            ctx.moveTo(cow.x + cow.type.width, cow.y);
            ctx.lineTo(cow.x + cow.type.width + 10, cow.y - 20);
            ctx.lineTo(cow.x + cow.type.width - 10, cow.y);
            ctx.closePath();
            ctx.fill();
        }

        // Function to draw the background
        function drawBackground() {
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Stars
            ctx.fillStyle = 'white';
            for (let i = 0; i < 100; i++) {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height;
                const size = Math.random() * 2;
                ctx.fillRect(x, y, size, size);
            }
        }

        // Function to create a new cow
        function createCow() {
            const type = cowTypes[Math.floor(Math.random() * cowTypes.length)];
            const x = Math.random() * (canvas.width - type.width);
            const y = -type.height;
            cows.push({ x, y, type });
        }

        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBackground(); // Draw background

            for (let i = 0; i < cows.length; i++) {
                cows[i].y += cows[i].type.speed + (level * 0.5); // Increase speed with level
                drawCow(cows[i]);

                if (cows[i].y > canvas.height) {
                    cows.splice(i, 1);
                    i--;
                }
            }

            scoreDisplay.textContent = score;
            timeDisplay.textContent = timeLeft;
            ammoDisplay.textContent = ammo;

            if (timeLeft <= 0 || ammo <= 0) {
                gameOver();
            }
        }

        function startGame() {
            menu.style.display = 'none';
            gameRunning = true;
            score = 0;
            timeLeft = 60;
            ammo = 20;
            cows = [];
            level = 1;

            // Timer
            gameInterval = setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                }

                // Cow creation
                if (Math.random() < 0.1 + (level * 0.05)) {
                    createCow();
                }
                update();
            }, 20);
        }

        function gameOver() {
            clearInterval(gameInterval);
            gameRunning = false;
            menu.style.display = 'flex';
            alert(`Game Over! Your score: ${score}`);
        }

        startButton.addEventListener('click', startGame);

        canvas.addEventListener('click', (event) => {
            if (!gameRunning || ammo <= 0) return;

            ammo--;
            const rect = canvas.getBoundingClientRect();
            const clickX = event.clientX - rect.left;
            const clickY = event.clientY - rect.top;

            for (let i = 0; i < cows.length; i++) {
                const cow = cows[i];
                if (
                    clickX >= cow.x &&
                    clickX <= cow.x + cow.type.width &&
                    clickY >= cow.y &&
                    clickY <= cow.y + cow.type.height
                ) {
                    score += cow.type.score;
                    cows.splice(i, 1);

                    // Level up
                    if (score > 0 && score % 50 === 0) {
                        level++;
                    }
                    break;
                }
            }
        });
    </script>
</body>
</html>
