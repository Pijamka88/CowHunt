<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–ø–∏–∫–∏</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #f0e6d2;
            --text-color: #5c4d3c;
            --panel-color: #e8d8b8;
            --border-color: #a38f6a;
            --button-color: #d4c29e;
            --button-active: #b8a786;
            --red: #d44d44;
            --yellow: #e6c229;
            --green: #6aab46;
            --blue: #4a8bc9;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Courier New', monospace;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.4;
            padding: 10px;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background-color: var(--panel-color);
            border: 2px solid var(--border-color);
            border-radius: 8px;
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.1);
        }

        .pets-count {
            background-color: var(--button-color);
            padding: 5px 10px;
            border-radius: 15px;
            font-weight: bold;
            border: 2px solid var(--border-color);
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .pets-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 10px;
            max-height: calc(100vh - 150px);
            overflow-y: auto;
            background-color: var(--panel-color);
            border: 2px solid var(--border-color);
            border-radius: 8px;
        }

        .pet {
            width: 120px;
            padding: 10px;
            background-color: var(--bg-color);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .pet.active {
            border-color: var(--blue);
            box-shadow: 0 0 0 2px var(--blue);
        }

        .pet-level {
            position: absolute;
            top: -10px;
            right: -10px;
            background-color: var(--blue);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
            border: 2px solid white;
        }

        .pet-image {
            width: 60px;
            height: 60px;
            margin-bottom: 10px;
            position: relative;
        }

        .pet-body {
            width: 50px;
            height: 40px;
            border-radius: 50% 50% 40% 40%;
            position: absolute;
            top: 20px;
        }

        .pet-head {
            width: 40px;
            height: 35px;
            border-radius: 50%;
            position: absolute;
            top: 0;
            left: 10px;
        }

        .pet-ear {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            position: absolute;
            top: -5px;
        }

        .pet-ear.left {
            left: 5px;
        }

        .pet-ear.right {
            right: 5px;
        }

        .pet-eye {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: var(--text-color);
            position: absolute;
            top: 15px;
        }

        .pet-eye.left {
            left: 12px;
        }

        .pet-eye.right {
            right: 12px;
        }

        .pet-nose {
            width: 8px;
            height: 6px;
            border-radius: 50%;
            background-color: var(--text-color);
            position: absolute;
            top: 22px;
            left: 16px;
        }

        .pet-stats {
            width: 100%;
            margin-top: 5px;
        }

        .stat {
            display: flex;
            align-items: center;
            margin-bottom: 3px;
            font-size: 10px;
        }

        .stat-icon {
            width: 12px;
            height: 12px;
            margin-right: 5px;
            font-size: 10px;
            text-align: center;
        }

        .stat-bar {
            flex-grow: 1;
            height: 8px;
            background-color: #ddd;
            border-radius: 4px;
            overflow: hidden;
        }

        .stat-fill {
            height: 100%;
            border-radius: 4px;
        }

        .hunger .stat-fill {
            background-color: var(--red);
        }

        .energy .stat-fill {
            background-color: var(--yellow);
        }

        .happiness .stat-fill {
            background-color: var(--green);
        }

        .xp-bar {
            width: 100%;
            height: 4px;
            background-color: #ddd;
            border-radius: 2px;
            margin-top: 5px;
            overflow: hidden;
        }

        .xp-fill {
            height: 100%;
            background-color: var(--blue);
        }

        .actions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
            padding: 10px;
            background-color: var(--panel-color);
            border: 2px solid var(--border-color);
            border-radius: 8px;
        }

        .action-btn {
            flex: 1 1 calc(25% - 8px);
            min-width: 60px;
            padding: 8px 5px;
            background-color: var(--button-color);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background-color: var(--button-active);
        }

        .action-btn:active {
            transform: translateY(1px);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .menu {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
            padding: 15px;
            background-color: var(--panel-color);
            border: 2px solid var(--border-color);
            border-radius: 8px;
        }

        .menu-btn {
            padding: 12px;
            background-color: var(--button-color);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .menu-btn:hover {
            background-color: var(--button-active);
        }

        .menu-btn:active {
            transform: translateY(1px);
        }

        .log {
            margin-top: 15px;
            padding: 10px;
            background-color: var(--panel-color);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            max-height: 100px;
            overflow-y: auto;
            font-size: 12px;
        }

        .log-entry {
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 1px dashed var(--border-color);
        }

        .log-entry:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        @media (max-width: 400px) {
            .pet {
                width: calc(50% - 10px);
            }
            
            .action-btn {
                flex: 1 1 calc(50% - 8px);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title">–¢–ê–ü–ò–ö–ò</div>
            <div class="pets-count" id="pets-count">1</div>
        </div>

        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="main-menu" class="screen active">
            <div class="menu">
                <div class="menu-btn" onclick="showScreen('game-screen')">–ò–ì–†–ê–¢–¨</div>
                <div class="menu-btn" onclick="showScreen('help-screen')">–ü–û–ú–û–©–¨</div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã -->
        <div id="game-screen" class="screen">
            <div class="pets-container" id="pets-container">
                <!-- –ü–∏—Ç–æ–º—Ü—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—é–¥–∞ -->
            </div>

            <div class="actions">
                <button class="action-btn" onclick="feed()">üçé –ö–û–†–ú–ò–¢–¨</button>
                <button class="action-btn" onclick="play()">üé≤ –ò–ì–†–ê–¢–¨</button>
                <button class="action-btn" onclick="rest()">üí§ –°–ü–ê–¢–¨</button>
                <button class="action-btn" onclick="train()">üí™ –¢–†–ï–ù–ò–†–û–í–ö–ê</button>
            </div>

            <div class="log" id="game-log">
                <div class="log-entry">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –¢–∞–ø–∏–∫–∏!</div>
                <div class="log-entry">–í–∞—à –ø–µ—Ä–≤—ã–π —Ç–∞–ø–∏–∫ –ø–æ—è–≤–∏–ª—Å—è!</div>
            </div>

            <div class="menu-btn" onclick="showScreen('main-menu')" style="margin-top: 10px;">–ú–ï–ù–Æ</div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø–æ–º–æ—â–∏ -->
        <div id="help-screen" class="screen">
            <div class="menu">
                <h2 style="margin-bottom: 10px; text-align: center;">–ö–ê–ö –ò–ì–†–ê–¢–¨</h2>
                <p style="margin-bottom: 10px;">–¢–∞–ø–∏–∫–∏ - —ç—Ç–æ –º–∏—à–∫–∏, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º–∏ –Ω—É–∂–Ω–æ —É—Ö–∞–∂–∏–≤–∞—Ç—å:</p>
                <ul style="margin-left: 20px; margin-bottom: 10px;">
                    <li>üçé <strong>–ö–æ—Ä–º–∏—Ç—å</strong> - —É–º–µ–Ω—å—à–∞–µ—Ç –≥–æ–ª–æ–¥</li>
                    <li>üé≤ <strong>–ò–≥—Ä–∞—Ç—å</strong> - —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–∞—Å—Ç—å–µ</li>
                    <li>üí§ <strong>–°–ø–∞—Ç—å</strong> - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é</li>
                    <li>üí™ <strong>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</strong> - –¥–∞–µ—Ç –æ–ø—ã—Ç –¥–ª—è —Ä–æ—Å—Ç–∞</li>
                </ul>
                <p style="margin-bottom: 10px;">–ö–æ–≥–¥–∞ —Ç–∞–ø–∏–∫ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç +3 —É—Ä–æ–≤–Ω—è –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ, –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ —Ç–∞–ø–∏–∫–∞!</p>
                <p>–ß–µ–º –±–æ–ª—å—à–µ —Ç–∞–ø–∏–∫–æ–≤, —Ç–µ–º –≤–µ—Å–µ–ª–µ–µ!</p>
                <div class="menu-btn" onclick="showScreen('main-menu')" style="margin-top: 15px;">–ù–ê–ó–ê–î</div>
            </div>
        </div>
    </div>

    <script>
        // –ò–≥—Ä–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        const gameState = {
            pets: [],
            currentPetIndex: 0,
            log: [],
            colors: ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFBE0B', '#FB5607', '#8338EC', '#3A86FF', '#FF006E'],
            lastUpdate: Date.now()
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –∏–≥—Ä—ã
            const savedGame = localStorage.getItem('tapikiGame');
            if (savedGame) {
                const parsed = JSON.parse(savedGame);
                gameState.pets = parsed.pets || [];
                gameState.currentPetIndex = parsed.currentPetIndex || 0;
                gameState.log = parsed.log || [];
                gameState.lastUpdate = parsed.lastUpdate || Date.now();
                
                if (gameState.pets.length === 0) {
                    createNewPet();
                }
            } else {
                createNewPet();
                addLog("–í–∞—à –ø–µ—Ä–≤—ã–π —Ç–∞–ø–∏–∫ –ø–æ—è–≤–∏–ª—Å—è!");
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
            if (window.Telegram && Telegram.WebApp) {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
            }
            
            updateStatsOverTime();
            renderGame();
        }

        // –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞
        function createNewPet() {
            const baseLevel = gameState.pets.length > 0 ? 
                Math.min(...gameState.pets.map(p => p.baseLevel)) : 1;
            
            const pet = {
                hunger: 70 + Math.floor(Math.random() * 30),
                energy: 70 + Math.floor(Math.random() * 30),
                happiness: 70 + Math.floor(Math.random() * 30),
                level: 1,
                xp: 0,
                baseLevel: baseLevel,
                color: gameState.colors[gameState.pets.length % gameState.colors.length],
                lastAction: Date.now()
            };
            
            gameState.pets.push(pet);
            gameState.currentPetIndex = gameState.pets.length - 1;
            
            addLog(`–ü–æ—è–≤–∏–ª—Å—è –Ω–æ–≤—ã–π —Ç–∞–ø–∏–∫! –¢–µ–ø–µ—Ä—å –∏—Ö ${gameState.pets.length}`);
            saveGame();
            return pet;
        }

        // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä—É
        function saveGame() {
            const gameToSave = {
                pets: gameState.pets,
                currentPetIndex: gameState.currentPetIndex,
                log: gameState.log,
                lastUpdate: Date.now()
            };
            localStorage.setItem('tapikiGame', JSON.stringify(gameToSave));
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            
            if (screenId === 'game-screen') {
                renderGame();
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
        function updateStatsOverTime() {
            const now = Date.now();
            const timePassed = (now - gameState.lastUpdate) / 1000; // –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
            
            if (timePassed > 0) {
                gameState.pets.forEach(pet => {
                    const hoursPassed = timePassed / 3600;
                    
                    // –£–º–µ–Ω—å—à–∞–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
                    pet.hunger = Math.max(0, pet.hunger - 5 * hoursPassed);
                    pet.energy = Math.max(0, pet.energy - 3 * hoursPassed);
                    pet.happiness = Math.max(0, pet.happiness - 2 * hoursPassed);
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–º–µ—Ä—Ç—å –æ—Ç neglect
                    if (pet.hunger <= 0 || pet.energy <= 0) {
                        const index = gameState.pets.indexOf(pet);
                        gameState.pets.splice(index, 1);
                        addLog(`–¢–∞–ø–∏–∫ ‚Ññ${index + 1} —É–º–µ—Ä –æ—Ç neglect!`);
                        
                        if (gameState.currentPetIndex >= gameState.pets.length) {
                            gameState.currentPetIndex = Math.max(0, gameState.pets.length - 1);
                        }
                    }
                });
                
                gameState.lastUpdate = now;
                saveGame();
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∞—Ç—å –∏–≥—Ä—É
        function renderGame() {
            updateStatsOverTime();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –ø–∏—Ç–æ–º—Ü–µ–≤
            document.getElementById('pets-count').textContent = gameState.pets.length;
            
            // –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –ø–∏—Ç–æ–º—Ü–µ–≤
            const container = document.getElementById('pets-container');
            container.innerHTML = '';
            
            gameState.pets.forEach((pet, index) => {
                const petElement = document.createElement('div');
                petElement.className = `pet ${index === gameState.currentPetIndex ? 'active' : ''}`;
                petElement.onclick = () => {
                    gameState.currentPetIndex = index;
                    renderGame();
                };
                
                // –£—Ä–æ–≤–µ–Ω—å
                const levelElement = document.createElement('div');
                levelElement.className = 'pet-level';
                levelElement.textContent = pet.level;
                petElement.appendChild(levelElement);
                
                // –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∏—à–∫–∏
                const imageElement = document.createElement('div');
                imageElement.className = 'pet-image';
                
                // –¢–µ–ª–æ
                const bodyElement = document.createElement('div');
                bodyElement.className = 'pet-body';
                bodyElement.style.backgroundColor = pet.color;
                imageElement.appendChild(bodyElement);
                
                // –ì–æ–ª–æ–≤–∞
                const headElement = document.createElement('div');
                headElement.className = 'pet-head';
                headElement.style.backgroundColor = pet.color;
                imageElement.appendChild(headElement);
                
                // –£—à–∏
                const earLeft = document.createElement('div');
                earLeft.className = 'pet-ear left';
                earLeft.style.backgroundColor = pet.color;
                imageElement.appendChild(earLeft);
                
                const earRight = document.createElement('div');
                earRight.className = 'pet-ear right';
                earRight.style.backgroundColor = pet.color;
                imageElement.appendChild(earRight);
                
                // –ì–ª–∞–∑–∞
                const eyeLeft = document.createElement('div');
                eyeLeft.className = 'pet-eye left';
                imageElement.appendChild(eyeLeft);
                
                const eyeRight = document.createElement('div');
                eyeRight.className = 'pet-eye right';
                imageElement.appendChild(eyeRight);
                
                // –ù–æ—Å
                const nose = document.createElement('div');
                nose.className = 'pet-nose';
                imageElement.appendChild(nose);
                
                petElement.appendChild(imageElement);
                
                // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                const statsElement = document.createElement('div');
                statsElement.className = 'pet-stats';
                
                // –ì–æ–ª–æ–¥
                const hungerStat = createStatElement('üçé', pet.hunger, 'hunger');
                statsElement.appendChild(hungerStat);
                
                // –≠–Ω–µ—Ä–≥–∏—è
                const energyStat = createStatElement('‚ö°', pet.energy, 'energy');
                statsElement.appendChild(energyStat);
                
                // –°—á–∞—Å—Ç—å–µ
                const happinessStat = createStatElement('‚ù§Ô∏è', pet.happiness, 'happiness');
                statsElement.appendChild(happinessStat);
                
                petElement.appendChild(statsElement);
                
                // XP –±–∞—Ä
                const xpBar = document.createElement('div');
                xpBar.className = 'xp-bar';
                
                const xpFill = document.createElement('div');
                xpFill.className = 'xp-fill';
                const xpPercentage = (pet.xp / (pet.level * 20)) * 100;
                xpFill.style.width = `${Math.min(100, xpPercentage)}%`;
                xpBar.appendChild(xpFill);
                
                petElement.appendChild(xpBar);
                
                container.appendChild(petElement);
            });
            
            // –ï—Å–ª–∏ –Ω–µ—Ç –ø–∏—Ç–æ–º—Ü–µ–≤, —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ
            if (gameState.pets.length === 0) {
                createNewPet();
            }
            
            saveGame();
        }

        // –°–æ–∑–¥–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function createStatElement(icon, value, className) {
            const stat = document.createElement('div');
            stat.className = `stat ${className}`;
            
            const iconElement = document.createElement('div');
            iconElement.className = 'stat-icon';
            iconElement.textContent = icon;
            stat.appendChild(iconElement);
            
            const bar = document.createElement('div');
            bar.className = 'stat-bar';
            
            const fill = document.createElement('div');
            fill.className = 'stat-fill';
            fill.style.width = `${Math.min(100, value)}%`;
            bar.appendChild(fill);
            
            stat.appendChild(bar);
            return stat;
        }

        // –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª–æ–≥
        function addLog(message) {
            gameState.log.unshift(message);
            if (gameState.log.length > 20) {
                gameState.log.pop();
            }
            
            const logElement = document.getElementById('game-log');
            if (logElement) {
                logElement.innerHTML = '';
                gameState.log.forEach(entry => {
                    const entryElement = document.createElement('div');
                    entryElement.className = 'log-entry';
                    entryElement.textContent = entry;
                    logElement.appendChild(entryElement);
                });
            }
        }

        // –î–µ–π—Å—Ç–≤–∏—è —Å –ø–∏—Ç–æ–º—Ü–µ–º
        function getCurrentPet() {
            return gameState.pets[gameState.currentPetIndex];
        }

        function feed() {
            const pet = getCurrentPet();
            
            if (pet.energy < 10) {
                addLog("–¢–∞–ø–∏–∫ —Å–ª–∏—à–∫–æ–º —É—Å—Ç–∞–ª, —á—Ç–æ–±—ã –µ—Å—Ç—å!");
                return;
            }
            
            pet.hunger = Math.min(100, pet.hunger + 30);
            pet.energy = Math.max(0, pet.energy - 10);
            addXp(pet, 5);
            
            addLog("–¢–∞–ø–∏–∫ –ø–æ–µ–ª –∏ —Å—Ç–∞–ª –º–µ–Ω–µ–µ –≥–æ–ª–æ–¥–Ω—ã–º!");
            renderGame();
        }

        function play() {
            const pet = getCurrentPet();
            
            if (pet.energy < 15 || pet.hunger < 20) {
                addLog("–¢–∞–ø–∏–∫ —Å–ª–∏—à–∫–æ–º —É—Å—Ç–∞–ª –∏–ª–∏ –≥–æ–ª–æ–¥–µ–Ω –¥–ª—è –∏–≥—Ä!");
                return;
            }
            
            pet.happiness = Math.min(100, pet.happiness + 25);
            pet.energy = Math.max(0, pet.energy - 15);
            pet.hunger = Math.max(0, pet.hunger - 20);
            addXp(pet, 8);
            
            addLog("–í—ã –ø–æ–∏–≥—Ä–∞–ª–∏ —Å —Ç–∞–ø–∏–∫–æ–º! –û–Ω —Å—á–∞—Å—Ç–ª–∏–≤!");
            renderGame();
        }

        function rest() {
            const pet = getCurrentPet();
            
            pet.energy = Math.min(100, pet.energy + 40);
            pet.happiness = Math.max(0, pet.happiness - 10);
            addXp(pet, 3);
            
            addLog("–¢–∞–ø–∏–∫ –ø–æ—Å–ø–∞–ª –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª —ç–Ω–µ—Ä–≥–∏—é!");
            renderGame();
        }

        function train() {
            const pet = getCurrentPet();
            
            if (pet.energy < 30 || pet.hunger < 30 || pet.happiness < 30) {
                addLog("–¢–∞–ø–∏–∫ –Ω–µ –≥–æ—Ç–æ–≤ –∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ!");
                return;
            }
            
            pet.energy = Math.max(0, pet.energy - 30);
            pet.hunger = Math.max(0, pet.hunger - 30);
            pet.happiness = Math.max(0, pet.happiness - 30);
            addXp(pet, 25);
            
            addLog("–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞! –¢–∞–ø–∏–∫ –ø–æ–ª—É—á–∏–ª –º–Ω–æ–≥–æ –æ–ø—ã—Ç–∞!");
            renderGame();
        }

        // –î–æ–±–∞–≤–∏—Ç—å –æ–ø—ã—Ç
        function addXp(pet, amount) {
            pet.xp += amount;
            checkLevelUp(pet);
        }

        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
        function checkLevelUp(pet) {
            const xpNeeded = pet.level * 20;
            
            if (pet.xp >= xpNeeded) {
                pet.xp -= xpNeeded;
                pet.level++;
                
                addLog(`–¢–∞–ø–∏–∫ –¥–æ—Å—Ç–∏–≥ —É—Ä–æ–≤–Ω—è ${pet.level}!`);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞
                if (pet.level >= pet.baseLevel + 3 && gameState.pets.length < 8) {
                    createNewPet();
                }
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = initGame;
    </script>
</body>
</html>