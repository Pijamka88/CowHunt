<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–ø–∏–∫–∏</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: 'Times New Roman', serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0e6d2;
            color: #3a2c1a;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path fill="%23d4c9a8" d="M50 0c27.6 0 50 22.4 50 50s-22.4 50-50 50S0 77.6 0 50 22.4 0 50 0zm0 10c-22.1 0-40 17.9-40 40s17.9 40 40 40 40-17.9 40-40-17.9-40-40-40z"/></svg>');
            background-size: 30px 30px;
        }
        
        #main-menu, #game-screen {
            background-color: #e8d8b5;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            border: 2px solid #8b7355;
            display: none;
        }
        
        button {
            background-color: #8b7355;
            border: none;
            color: #f0e6d2;
            padding: 10px 15px;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-size: 16px;
            margin: 5px 2px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
            border: 1px solid #3a2c1a;
        }
        
        button:hover {
            background-color: #6b5a45;
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .pet-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        
        .pet-card {
            background-color: #d4c9a8;
            border-radius: 10px;
            padding: 10px;
            border: 2px solid #8b7355;
            width: 120px;
            position: relative;
        }
        
        .pet {
            width: 80px;
            height: 80px;
            margin: 0 auto;
            position: relative;
        }
        
        .pet-body {
            width: 60px;
            height: 50px;
            background-color: currentColor;
            border-radius: 50% 50% 40% 40%;
            position: absolute;
            top: 20px;
            left: 10px;
        }
        
        .pet-head {
            width: 40px;
            height: 40px;
            background-color: currentColor;
            border-radius: 50%;
            position: absolute;
            top: 0;
            left: 20px;
        }
        
        .pet-ear {
            width: 15px;
            height: 15px;
            background-color: currentColor;
            border-radius: 50%;
            position: absolute;
            top: -5px;
        }
        
        .pet-ear.left {
            left: 5px;
        }
        
        .pet-ear.right {
            right: 5px;
        }
        
        .pet-eye {
            width: 8px;
            height: 8px;
            background-color: #3a2c1a;
            border-radius: 50%;
            position: absolute;
            top: 15px;
        }
        
        .pet-eye.left {
            left: 10px;
        }
        
        .pet-eye.right {
            right: 10px;
        }
        
        .pet-nose {
            width: 6px;
            height: 4px;
            background-color: #3a2c1a;
            border-radius: 50%;
            position: absolute;
            top: 25px;
            left: 17px;
        }
        
        .pet-mouth {
            width: 12px;
            height: 6px;
            border-bottom: 2px solid #3a2c1a;
            border-radius: 0 0 50% 50%;
            position: absolute;
            top: 28px;
            left: 14px;
        }
        
        .pet-stats {
            margin-top: 10px;
            font-size: 12px;
        }
        
        .stat-bar {
            height: 10px;
            background-color: #8b7355;
            border-radius: 5px;
            margin: 2px 0;
            overflow: hidden;
        }
        
        .stat-fill {
            height: 100%;
            background-color: #4CAF50;
            border-radius: 5px;
        }
        
        .stat-row {
            display: flex;
            align-items: center;
            margin-bottom: 2px;
        }
        
        .stat-icon {
            width: 12px;
            height: 12px;
            margin-right: 5px;
        }
        
        .actions-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
            margin-top: 20px;
        }
        
        .action-btn {
            width: 70px;
            padding: 8px 5px;
        }
        
        .level-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #8b7355;
            color: #f0e6d2;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            border: 1px solid #3a2c1a;
        }
        
        .pets-count {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #8b7355;
            color: #f0e6d2;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            border: 1px solid #3a2c1a;
        }
        
        .exp-bar {
            width: 100%;
            height: 5px;
            background-color: #8b7355;
            border-radius: 3px;
            margin-top: 5px;
            overflow: hidden;
        }
        
        .exp-fill {
            height: 100%;
            background-color: #d4a017;
            width: 0%;
        }
        
        h1, h2 {
            color: #3a2c1a;
            text-align: center;
            margin-top: 0;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 20px;
        }
        
        .menu-button {
            display: block;
            width: 100%;
            margin: 10px 0;
            padding: 12px;
            font-size: 18px;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .pet-animation {
            animation: bounce 1s infinite;
        }
        
        .evolution-animation {
            animation: bounce 0.5s infinite, glow 1s infinite alternate;
        }
        
        @keyframes glow {
            from { filter: drop-shadow(0 0 2px rgba(255, 215, 0, 0.5)); }
            to { filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.8)); }
        }
        
        .dead {
            filter: grayscale(100%) brightness(0.7);
        }
    </style>
</head>
<body>
    <div id="main-menu">
        <h1>–¢–∞–ø–∏–∫–∏</h1>
        <button id="continue-btn" class="menu-button">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        <button id="new-game-btn" class="menu-button">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
    </div>
    
    <div id="game-screen">
        <div class="pets-count" id="pets-count">1</div>
        <h2>–í–∞—à–∏ –¢–∞–ø–∏–∫–∏</h2>
        
        <div class="pet-container" id="pet-container">
            <!-- –ü–∏—Ç–æ–º—Ü—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>
        
        <div class="actions-container">
            <button class="action-btn" id="feed-btn">üçé –ö–æ—Ä–º–∏—Ç—å</button>
            <button class="action-btn" id="play-btn">üé≤ –ò–≥—Ä–∞—Ç—å</button>
            <button class="action-btn" id="sleep-btn">üåô –°–ø–∞—Ç—å</button>
            <button class="action-btn" id="heal-btn">üíä –õ–µ—á–∏—Ç—å</button>
            <button class="action-btn" id="train-btn">‚öî –¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
        
        <button id="menu-btn" style="margin-top: 20px; width: 100%;">–ú–µ–Ω—é</button>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand();
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameState = {
            pets: [],
            lastUpdate: Date.now(),
            version: 1
        };
        
        // –¶–≤–µ—Ç–∞ –¥–ª—è –ø–∏—Ç–æ–º—Ü–µ–≤
        const petColors = [
            '#8B4513', // –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π
            '#A0522D', // —Å–∏–µ–Ω–∞
            '#CD853F', // –ø–µ—Ä—É
            '#D2691E', // —à–æ–∫–æ–ª–∞–¥
            '#B8860B', // —Ç–µ–º–Ω–æ-–∑–æ–ª–æ—Ç–æ–π
            '#DAA520', // –∑–æ–ª–æ—Ç–æ–π –¥—É–±
            '#F4A460', // –ø–µ—Å–æ—á–Ω—ã–π
            '#DEB887'  // –±—É—Ä–ª–∏–≤—É–¥
        ];
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        const elements = {
            mainMenu: document.getElementById('main-menu'),
            gameScreen: document.getElementById('game-screen'),
            
            // –ö–Ω–æ–ø–∫–∏ –º–µ–Ω—é
            continueBtn: document.getElementById('continue-btn'),
            newGameBtn: document.getElementById('new-game-btn'),
            menuBtn: document.getElementById('menu-btn'),
            
            // –ò–≥—Ä–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            petContainer: document.getElementById('pet-container'),
            petsCount: document.getElementById('pets-count'),
            
            // –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
            feedBtn: document.getElementById('feed-btn'),
            playBtn: document.getElementById('play-btn'),
            sleepBtn: document.getElementById('sleep-btn'),
            healBtn: document.getElementById('heal-btn'),
            trainBtn: document.getElementById('train-btn')
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            loadGame();
            setupEventListeners();
            updateMenu();
            
            if (gameState.pets.length > 0) {
                showGameScreen();
                updateGameUI();
            } else {
                showMainMenu();
            }
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
            setInterval(gameLoop, 1000);
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –ö–Ω–æ–ø–∫–∏ –º–µ–Ω—é
            elements.continueBtn.addEventListener('click', showGameScreen);
            elements.newGameBtn.addEventListener('click', startNewGame);
            elements.menuBtn.addEventListener('click', showMainMenu);
            
            // –ò–≥—Ä–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
            elements.feedBtn.addEventListener('click', () => performAction('feed'));
            elements.playBtn.addEventListener('click', () => performAction('play'));
            elements.sleepBtn.addEventListener('click', () => performAction('sleep'));
            elements.healBtn.addEventListener('click', () => performAction('heal'));
            elements.trainBtn.addEventListener('click', () => performAction('train'));
        }
        
        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameLoop() {
            if (gameState.pets.length === 0) return;
            
            const now = Date.now();
            const deltaTime = (now - gameState.lastUpdate) / 1000; // –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
            gameState.lastUpdate = now;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ—Ö –ø–∏—Ç–æ–º—Ü–µ–≤
            gameState.pets.forEach(pet => {
                updatePet(pet, deltaTime);
            });
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–≥—Ä—É –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            saveGame();
            updateGameUI();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∏—Ç–æ–º—Ü–∞
        function updatePet(pet, deltaTime) {
            // –£–º–µ–Ω—å—à–∞–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
            pet.hunger = Math.max(0, pet.hunger - 0.5 * deltaTime);
            pet.energy = Math.max(0, pet.energy - 0.3 * deltaTime);
            pet.happiness = Math.max(0, pet.happiness - 0.2 * deltaTime);
            
            // –ï—Å–ª–∏ –≥–æ–ª–æ–¥ –∏–ª–∏ —ç–Ω–µ—Ä–≥–∏—è –Ω–∞ –Ω—É–ª–µ, —É–º–µ–Ω—å—à–∞–µ–º –∑–¥–æ—Ä–æ–≤—å–µ
            if (pet.hunger <= 0 || pet.energy <= 0) {
                pet.health = Math.max(0, pet.health - 1 * deltaTime);
            }
            
            // –ï—Å–ª–∏ –∑–¥–æ—Ä–æ–≤—å–µ –Ω–∞ –Ω—É–ª–µ, —É–º–µ–Ω—å—à–∞–µ–º —Å—á–∞—Å—Ç—å–µ
            if (pet.health <= 0 && !pet.isDead) {
                pet.isDead = true;
                pet.deathTime = Date.now();
            }
            
            // –ï—Å–ª–∏ –ø–∏—Ç–æ–º–µ—Ü –º–µ—Ä—Ç–≤ –±–æ–ª–µ–µ 5 –º–∏–Ω—É—Ç, —É–¥–∞–ª—è–µ–º –µ–≥–æ
            if (pet.isDead && Date.now() - pet.deathTime > 300000) {
                const index = gameState.pets.indexOf(pet);
                if (index !== -1) {
                    gameState.pets.splice(index, 1);
                }
            }
        }
        
        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è —Å —Ç–µ–∫—É—â–∏–º –ø–∏—Ç–æ–º—Ü–µ–º
        function performAction(action) {
            const activePet = getActivePet();
            if (!activePet || activePet.isDead) return;
            
            switch (action) {
                case 'feed':
                    activePet.hunger = Math.min(100, activePet.hunger + 30);
                    activePet.energy = Math.min(100, activePet.energy - 5);
                    activePet.exp += 5;
                    break;
                case 'play':
                    activePet.happiness = Math.min(100, activePet.happiness + 20);
                    activePet.energy = Math.min(100, activePet.energy - 10);
                    activePet.hunger = Math.max(0, activePet.hunger - 5);
                    activePet.exp += 10;
                    break;
                case 'sleep':
                    activePet.energy = Math.min(100, activePet.energy + 40);
                    activePet.hunger = Math.max(0, activePet.hunger - 10);
                    activePet.exp += 5;
                    break;
                case 'heal':
                    activePet.health = Math.min(100, activePet.health + 30);
                    activePet.energy = Math.max(0, activePet.energy - 15);
                    activePet.exp += 5;
                    break;
                case 'train':
                    activePet.energy = Math.max(0, activePet.energy - 20);
                    activePet.hunger = Math.max(0, activePet.hunger - 15);
                    activePet.exp += 20;
                    break;
            }
            
            checkLevelUp(activePet);
            updateGameUI();
            saveGame();
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
        function checkLevelUp(pet) {
            const expNeeded = getExpForLevel(pet.level + 1);
            
            if (pet.exp >= expNeeded) {
                pet.level++;
                pet.exp -= expNeeded;
                
                // –ï—Å–ª–∏ —É—Ä–æ–≤–µ–Ω—å –∫—Ä–∞—Ç–µ–Ω 3, –ø–∏—Ç–æ–º–µ—Ü —Ä–∞–∑–º–Ω–æ–∂–∞–µ—Ç—Å—è
                if (pet.level % 3 === 0) {
                    reproducePet(pet);
                }
            }
        }
        
        // –†–∞–∑–º–Ω–æ–∂–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
        function reproducePet(parentPet) {
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ–¥–∏—Ç–µ–ª—è
            const newPet = {
                color: getRandomColor(),
                level: 1,
                exp: 0,
                health: 100,
                hunger: 50,
                energy: 80,
                happiness: 70,
                isDead: false,
                birthTime: Date.now()
            };
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é
            gameState.pets.push(newPet);
            
            // –í–∫–ª—é—á–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞
            setTimeout(() => {
                updateGameUI();
            }, 100);
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ –¥–ª—è –ø–∏—Ç–æ–º—Ü–∞
        function getRandomColor() {
            return petColors[Math.floor(Math.random() * petColors.length)];
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞ (–ø–µ—Ä–≤—ã–π –Ω–µ –º–µ—Ä—Ç–≤—ã–π)
        function getActivePet() {
            return gameState.pets.find(pet => !pet.isDead) || gameState.pets[0];
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø—ã—Ç–∞ –¥–ª—è —É—Ä–æ–≤–Ω—è
        function getExpForLevel(level) {
            return 100 * Math.pow(level, 1.5);
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏–≥—Ä—ã
        function updateGameUI() {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –ø–∏—Ç–æ–º—Ü–µ–≤
            elements.petsCount.textContent = gameState.pets.length;
            
            // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–∏—Ç–æ–º—Ü–∞–º–∏
            elements.petContainer.innerHTML = '';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ –≤—Å–µ—Ö –ø–∏—Ç–æ–º—Ü–µ–≤
            gameState.pets.forEach((pet, index) => {
                const petElement = document.createElement('div');
                petElement.className = 'pet-card';
                if (pet.isDead) {
                    petElement.classList.add('dead');
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–∏—Ç–æ–º–µ—Ü –∞–∫—Ç–∏–≤–Ω—ã–º
                const activePet = getActivePet();
                const isActive = pet === activePet;
                
                // –°–æ–∑–¥–∞–µ–º HTML –¥–ª—è –ø–∏—Ç–æ–º—Ü–∞
                petElement.innerHTML = `
                    <div class="pet ${isActive ? 'pet-animation' : ''}">
                        <div class="pet-ear left"></div>
                        <div class="pet-ear right"></div>
                        <div class="pet-head"></div>
                        <div class="pet-body"></div>
                        <div class="pet-eye left"></div>
                        <div class="pet-eye right"></div>
                        <div class="pet-nose"></div>
                        <div class="pet-mouth"></div>
                    </div>
                    <div class="level-badge">${pet.level}</div>
                    <div class="pet-stats">
                        <div class="stat-row">
                            <div class="stat-icon">‚ù§</div>
                            <div class="stat-bar"><div class="stat-fill" style="width: ${pet.health}%"></div></div>
                        </div>
                        <div class="stat-row">
                            <div class="stat-icon">üçó</div>
                            <div class="stat-bar"><div class="stat-fill" style="width: ${pet.hunger}%"></div></div>
                        </div>
                        <div class="stat-row">
                            <div class="stat-icon">‚ö°</div>
                            <div class="stat-bar"><div class="stat-fill" style="width: ${pet.energy}%"></div></div>
                        </div>
                        <div class="stat-row">
                            <div class="stat-icon">üòä</div>
                            <div class="stat-bar"><div class="stat-fill" style="width: ${pet.happiness}%"></div></div>
                        </div>
                        <div class="exp-bar">
                            <div class="exp-fill" style="width: ${(pet.exp / getExpForLevel(pet.level + 1)) * 100}%"></div>
                        </div>
                    </div>
                `;
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç –ø–∏—Ç–æ–º—Ü–∞
                const petDiv = petElement.querySelector('.pet');
                petDiv.style.color = pet.color;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–∏—Ç–æ–º—Ü–∞
                if (!pet.isDead) {
                    petElement.addEventListener('click', () => {
                        // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞ –≤ –Ω–∞—á–∞–ª–æ –º–∞—Å—Å–∏–≤–∞
                        const index = gameState.pets.indexOf(pet);
                        if (index > 0) {
                            gameState.pets.splice(index, 1);
                            gameState.pets.unshift(pet);
                            updateGameUI();
                        }
                    });
                }
                
                elements.petContainer.appendChild(petElement);
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π
            const activePet = getActivePet();
            if (activePet && activePet.isDead) {
                elements.feedBtn.disabled = true;
                elements.playBtn.disabled = true;
                elements.sleepBtn.disabled = true;
                elements.healBtn.disabled = true;
                elements.trainBtn.disabled = true;
            } else {
                elements.feedBtn.disabled = false;
                elements.playBtn.disabled = false;
                elements.sleepBtn.disabled = false;
                elements.healBtn.disabled = false;
                elements.trainBtn.disabled = false;
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é
        function updateMenu() {
            elements.continueBtn.disabled = gameState.pets.length === 0;
        }
        
        // –ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É
        function startNewGame() {
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –ø–∏—Ç–æ–º—Ü–∞
            const newPet = {
                color: getRandomColor(),
                level: 1,
                exp: 0,
                health: 100,
                hunger: 50,
                energy: 80,
                happiness: 70,
                isDead: false,
                birthTime: Date.now()
            };
            
            // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã—Ö –ø–∏—Ç–æ–º—Ü–µ–≤ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–≥–æ
            gameState.pets = [newPet];
            gameState.lastUpdate = Date.now();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–≥—Ä—É
            saveGame();
            showGameScreen();
            updateGameUI();
            updateMenu();
        }
        
        // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä—É
        function saveGame() {
            localStorage.setItem('tapikiGame', JSON.stringify(gameState));
        }
        
        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä—É
        function loadGame() {
            const savedGame = localStorage.getItem('tapikiGame');
            if (savedGame) {
                const parsed = JSON.parse(savedGame);
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
                if (parsed.version === gameState.version) {
                    gameState = parsed;
                }
            }
        }
        
        // –°–∫—Ä—ã—Ç—å –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
        function hideAllScreens() {
            elements.mainMenu.style.display = 'none';
            elements.gameScreen.style.display = 'none';
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
        function showMainMenu() {
            hideAllScreens();
            elements.mainMenu.style.display = 'block';
            updateMenu();
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –∏–≥—Ä—ã
        function showGameScreen() {
            hideAllScreens();
            elements.gameScreen.style.display = 'block';
            updateGameUI();
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–≥—Ä—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>