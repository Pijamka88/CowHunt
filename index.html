<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evolution Tamagotchi</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
            color: #333;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }
        
        header {
            background-color: #4CAF50;
            color: white;
            padding: 15px 0;
            text-align: center;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        
        h1 {
            margin: 0;
            font-size: 24px;
        }
        
        .menu {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .game-screen {
            display: none;
            flex-direction: column;
            gap: 15px;
        }
        
        .pet-info {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .pet-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .stat {
            background-color: #e9f7ef;
            padding: 8px;
            border-radius: 4px;
            flex: 1;
            min-width: 120px;
            text-align: center;
        }
        
        .stat-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 18px;
        }
        
        .actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .action-btn {
            flex: 1;
            min-width: 120px;
        }
        
        .log {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            max-height: 200px;
            overflow-y: auto;
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }
        
        .log-time {
            color: #888;
            font-size: 12px;
        }
        
        .pets-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
        }
        
        .pet-card {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            flex: 1;
            min-width: 200px;
        }
        
        .pet-name {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
            color: #4CAF50;
        }
        
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 4px;
            margin: 5px 0;
        }
        
        .progress-bar {
            height: 10px;
            border-radius: 4px;
            background-color: #4CAF50;
            width: 100%;
        }
        
        .evolution-screen {
            display: none;
            flex-direction: column;
            gap: 15px;
        }
        
        .back-btn {
            background-color: #f44336;
        }
        
        .back-btn:hover {
            background-color: #d32f2f;
        }
        
        .hidden {
            display: none;
        }
        
        footer {
            text-align: center;
            padding: 15px;
            color: #888;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Evolution Tamagotchi</h1>
        </header>
        
        <!-- Main Menu -->
        <div id="main-menu" class="menu">
            <button id="new-game-btn">New Game</button>
            <button id="continue-game-btn">Continue Game</button>
            <button id="how-to-play-btn">How to Play</button>
        </div>
        
        <!-- How to Play Screen -->
        <div id="how-to-play-screen" class="hidden">
            <h2>How to Play</h2>
            <p>Welcome to Evolution Tamagotchi!</p>
            <ul>
                <li>Start with a single pet that needs your care</li>
                <li>Keep your pet healthy by feeding, playing, and cleaning</li>
                <li>As your pet levels up, it will evolve and gain new abilities</li>
                <li>At level 5, your pet will divide into two new pets</li>
                <li>Manage multiple pets as your colony grows</li>
                <li>Each pet has unique traits and evolution paths</li>
            </ul>
            <button id="back-from-help-btn" class="back-btn">Back to Menu</button>
        </div>
        
        <!-- Game Screen -->
        <div id="game-screen" class="game-screen hidden">
            <div id="pets-view">
                <!-- Pets will be displayed here -->
            </div>
            
            <div class="actions">
                <button id="feed-btn" class="action-btn">Feed</button>
                <button id="play-btn" class="action-btn">Play</button>
                <button id="clean-btn" class="action-btn">Clean</button>
                <button id="sleep-btn" class="action-btn">Sleep</button>
                <button id="train-btn" class="action-btn">Train</button>
            </div>
            
            <div class="log" id="game-log">
                <div class="log-entry">
                    <span class="log-time">[System]</span> Welcome to Evolution Tamagotchi!
                </div>
            </div>
            
            <button id="back-to-menu-btn" class="back-btn">Back to Menu</button>
        </div>
        
        <!-- Evolution Screen -->
        <div id="evolution-screen" class="evolution-screen hidden">
            <h2>Evolution Complete!</h2>
            <div id="evolution-info"></div>
            <button id="continue-after-evolution-btn">Continue</button>
        </div>
    </div>
    
    <footer>
        Evolution Tamagotchi v1.0 | Telegram Web App
    </footer>
    
    <script>
        // Game state
        const gameState = {
            pets: [],
            currentPetIndex: 0,
            gameLog: [],
            lastUpdateTime: Date.now(),
            version: '1.0'
        };
        
        // Pet types and their properties
        const petTypes = {
            cell: {
                name: 'Micro Cell',
                evolutions: ['amoeba', 'bacteria'],
                color: '#8BC34A'
            },
            amoeba: {
                name: 'Amoeba',
                evolutions: ['paramecium', 'hydra'],
                color: '#FFC107'
            },
            bacteria: {
                name: 'Bacteria',
                evolutions: ['virus', 'fungus'],
                color: '#9E9E9E'
            },
            paramecium: {
                name: 'Paramecium',
                evolutions: ['worm', 'jellyfish'],
                color: '#03A9F4'
            },
            hydra: {
                name: 'Hydra',
                evolutions: ['starfish', 'coral'],
                color: '#E91E63'
            },
            virus: {
                name: 'Virus',
                evolutions: ['plague', 'mutant'],
                color: '#F44336'
            },
            fungus: {
                name: 'Fungus',
                evolutions: ['mushroom', 'mold'],
                color: '#795548'
            }
        };
        
        // Initialize Telegram Web App
        const tg = window.Telegram.WebApp;
        
        // DOM elements
        const elements = {
            mainMenu: document.getElementById('main-menu'),
            newGameBtn: document.getElementById('new-game-btn'),
            continueGameBtn: document.getElementById('continue-game-btn'),
            howToPlayBtn: document.getElementById('how-to-play-btn'),
            howToPlayScreen: document.getElementById('how-to-play-screen'),
            backFromHelpBtn: document.getElementById('back-from-help-btn'),
            gameScreen: document.getElementById('game-screen'),
            petsView: document.getElementById('pets-view'),
            feedBtn: document.getElementById('feed-btn'),
            playBtn: document.getElementById('play-btn'),
            cleanBtn: document.getElementById('clean-btn'),
            sleepBtn: document.getElementById('sleep-btn'),
            trainBtn: document.getElementById('train-btn'),
            gameLog: document.getElementById('game-log'),
            backToMenuBtn: document.getElementById('back-to-menu-btn'),
            evolutionScreen: document.getElementById('evolution-screen'),
            evolutionInfo: document.getElementById('evolution-info'),
            continueAfterEvolutionBtn: document.getElementById('continue-after-evolution-btn')
        };
        
        // Event listeners
        elements.newGameBtn.addEventListener('click', startNewGame);
        elements.continueGameBtn.addEventListener('click', continueGame);
        elements.howToPlayBtn.addEventListener('click', showHowToPlay);
        elements.backFromHelpBtn.addEventListener('click', backToMainMenu);
        elements.backToMenuBtn.addEventListener('click', backToMainMenu);
        elements.feedBtn.addEventListener('click', () => performAction('feed'));
        elements.playBtn.addEventListener('click', () => performAction('play'));
        elements.cleanBtn.addEventListener('click', () => performAction('clean'));
        elements.sleepBtn.addEventListener('click', () => performAction('sleep'));
        elements.trainBtn.addEventListener('click', () => performAction('train'));
        elements.continueAfterEvolutionBtn.addEventListener('click', continueAfterEvolution);
        
        // Initialize the game
        function init() {
            // Expand the Web App to full viewport
            tg.expand();
            
            // Check for saved game
            const savedGame = localStorage.getItem('evolutionTamagotchi');
            if (savedGame) {
                try {
                    const parsed = JSON.parse(savedGame);
                    if (parsed.version === gameState.version) {
                        elements.continueGameBtn.disabled = false;
                    }
                } catch (e) {
                    console.error('Error parsing saved game:', e);
                }
            }
            
            // Add system info to log
            addToLog('System', 'Game initialized. Welcome to Evolution Tamagotchi!');
        }
        
        // Start a new game
        function startNewGame() {
            if (confirm('Are you sure you want to start a new game? This will overwrite any existing save.')) {
                // Create initial pet
                gameState.pets = [createNewPet('cell')];
                gameState.currentPetIndex = 0;
                gameState.gameLog = [];
                gameState.lastUpdateTime = Date.now();
                
                // Save game
                saveGame();
                
                // Update UI
                updateGameScreen();
                elements.gameScreen.classList.remove('hidden');
                elements.mainMenu.classList.add('hidden');
                
                addToLog('System', 'New game started with a Micro Cell!');
            }
        }
        
        // Continue existing game
        function continueGame() {
            const savedGame = localStorage.getItem('evolutionTamagotchi');
            if (savedGame) {
                try {
                    const parsed = JSON.parse(savedGame);
                    if (parsed.version === gameState.version) {
                        Object.assign(gameState, parsed);
                        gameState.lastUpdateTime = Date.now();
                        
                        // Update UI
                        updateGameScreen();
                        elements.gameScreen.classList.remove('hidden');
                        elements.mainMenu.classList.add('hidden');
                        
                        addToLog('System', 'Game loaded successfully!');
                        return;
                    }
                } catch (e) {
                    console.error('Error loading game:', e);
                }
            }
            
            alert('No saved game found or save is corrupted.');
        }
        
        // Show how to play screen
        function showHowToPlay() {
            elements.mainMenu.classList.add('hidden');
            elements.howToPlayScreen.classList.remove('hidden');
        }
        
        // Back to main menu
        function backToMainMenu() {
            // Save game before going back to menu
            if (gameState.pets.length > 0) {
                saveGame();
            }
            
            elements.gameScreen.classList.add('hidden');
            elements.howToPlayScreen.classList.add('hidden');
            elements.evolutionScreen.classList.add('hidden');
            elements.mainMenu.classList.remove('hidden');
        }
        
        // Create a new pet
        function createNewPet(type, parentTraits = null) {
            const now = Date.now();
            const petType = petTypes[type] || petTypes.cell;
            
            // Generate random name if not provided
            const names = ['Alpha', 'Beta', 'Gamma', 'Delta', 'Sigma', 'Omega', 'Zeta', 'Theta'];
            const name = parentTraits?.name || `${names[Math.floor(Math.random() * names.length)]}-${Math.floor(Math.random() * 1000)}`;
            
            // Inherit or generate new traits
            const traits = parentTraits ? {
                ...parentTraits,
                hungerRate: parentTraits.hungerRate * (0.9 + Math.random() * 0.2),
                energyRate: parentTraits.energyRate * (0.9 + Math.random() * 0.2),
                happinessRate: parentTraits.happinessRate * (0.9 + Math.random() * 0.2),
                cleanlinessRate: parentTraits.cleanlinessRate * (0.9 + Math.random() * 0.2),
                growthRate: parentTraits.growthRate * (0.9 + Math.random() * 0.2)
            } : {
                hungerRate: 0.5 + Math.random() * 0.5,
                energyRate: 0.5 + Math.random() * 0.5,
                happinessRate: 0.5 + Math.random() * 0.5,
                cleanlinessRate: 0.5 + Math.random() * 0.5,
                growthRate: 0.5 + Math.random() * 0.5
            };
            
            return {
                id: now + '-' + Math.random().toString(36).substr(2, 9),
                name,
                type,
                level: 1,
                experience: 0,
                health: 100,
                hunger: 50,
                energy: 100,
                happiness: 50,
                cleanliness: 100,
                age: 0,
                lastUpdated: now,
                traits,
                evolutionCount: parentTraits?.evolutionCount || 0,
                generation: parentTraits ? parentTraits.generation + 1 : 1
            };
        }
        
        // Update game screen with current pet data
        function updateGameScreen() {
            if (gameState.pets.length === 0) return;
            
            // Clear previous pets view
            elements.petsView.innerHTML = '';
            
            // Create pet cards for all pets
            gameState.pets.forEach((pet, index) => {
                const petCard = document.createElement('div');
                petCard.className = 'pet-card';
                if (index === gameState.currentPetIndex) {
                    petCard.style.border = '2px solid #4CAF50';
                }
                
                // Calculate time since last update
                const now = Date.now();
                const timeDiff = (now - pet.lastUpdated) / 1000; // in seconds
                
                // Update pet stats based on time passed
                updatePetStats(pet, timeDiff);
                
                // Pet name and type
                const petName = document.createElement('div');
                petName.className = 'pet-name';
                petName.textContent = `${pet.name} (${petTypes[pet.type].name})`;
                petName.style.color = petTypes[pet.type].color;
                petCard.appendChild(petName);
                
                // Level and experience
                const levelInfo = document.createElement('div');
                levelInfo.textContent = `Level ${pet.level} (${Math.round(pet.experience)}/${Math.round(100 * pet.level)} XP)`;
                petCard.appendChild(levelInfo);
                
                // Experience progress bar
                const expProgressContainer = document.createElement('div');
                expProgressContainer.className = 'progress-container';
                const expProgressBar = document.createElement('div');
                expProgressBar.className = 'progress-bar';
                expProgressBar.style.width = `${(pet.experience / (100 * pet.level)) * 100}%`;
                expProgressContainer.appendChild(expProgressBar);
                petCard.appendChild(expProgressContainer);
                
                // Age
                const ageInfo = document.createElement('div');
                ageInfo.textContent = `Age: ${Math.floor(pet.age / 60)}m ${Math.floor(pet.age % 60)}s`;
                petCard.appendChild(ageInfo);
                
                // Generation
                const genInfo = document.createElement('div');
                genInfo.textContent = `Generation: ${pet.generation}`;
                petCard.appendChild(genInfo);
                
                // Stats
                const statsContainer = document.createElement('div');
                statsContainer.className = 'pet-stats';
                
                // Health
                const healthStat = createStatElement('Health', pet.health, 100, '#F44336');
                statsContainer.appendChild(healthStat);
                
                // Hunger
                const hungerStat = createStatElement('Hunger', pet.hunger, 100, '#FF9800');
                statsContainer.appendChild(hungerStat);
                
                // Energy
                const energyStat = createStatElement('Energy', pet.energy, 100, '#2196F3');
                statsContainer.appendChild(energyStat);
                
                // Happiness
                const happinessStat = createStatElement('Happiness', pet.happiness, 100, '#E91E63');
                statsContainer.appendChild(happinessStat);
                
                // Cleanliness
                const cleanlinessStat = createStatElement('Cleanliness', pet.cleanliness, 100, '#009688');
                statsContainer.appendChild(cleanlinessStat);
                
                petCard.appendChild(statsContainer);
                
                // Select pet button
                if (gameState.pets.length > 1) {
                    const selectBtn = document.createElement('button');
                    selectBtn.textContent = 'Select';
                    selectBtn.style.marginTop = '10px';
                    selectBtn.style.width = '100%';
                    selectBtn.addEventListener('click', () => {
                        gameState.currentPetIndex = index;
                        updateGameScreen();
                        addToLog('System', `Now caring for ${pet.name}`);
                    });
                    petCard.appendChild(selectBtn);
                }
                
                elements.petsView.appendChild(petCard);
            });
            
            // Update last update time
            gameState.lastUpdateTime = Date.now();
            
            // Save game state
            saveGame();
        }
        
        // Create a stat element
        function createStatElement(name, value, max, color) {
            const stat = document.createElement('div');
            stat.className = 'stat';
            
            const statName = document.createElement('div');
            statName.className = 'stat-name';
            statName.textContent = name;
            stat.appendChild(statName);
            
            const statValue = document.createElement('div');
            statValue.className = 'stat-value';
            statValue.textContent = Math.round(value);
            statValue.style.color = color;
            stat.appendChild(statValue);
            
            const progressContainer = document.createElement('div');
            progressContainer.className = 'progress-container';
            
            const progressBar = document.createElement('div');
            progressBar.className = 'progress-bar';
            progressBar.style.width = `${(value / max) * 100}%`;
            progressBar.style.backgroundColor = color;
            progressContainer.appendChild(progressBar);
            
            stat.appendChild(progressContainer);
            
            return stat;
        }
        
        // Update pet stats based on time passed
        function updatePetStats(pet, timeDiff) {
            // Update age
            pet.age += timeDiff;
            
            // Update stats based on rates
            pet.hunger = Math.max(0, Math.min(100, pet.hunger - (timeDiff * 0.1 * pet.traits.hungerRate)));
            pet.energy = Math.max(0, Math.min(100, pet.energy - (timeDiff * 0.05 * pet.traits.energyRate)));
            pet.happiness = Math.max(0, Math.min(100, pet.happiness - (timeDiff * 0.07 * pet.traits.happinessRate)));
            pet.cleanliness = Math.max(0, Math.min(100, pet.cleanliness - (timeDiff * 0.03 * pet.traits.cleanlinessRate)));
            
            // Health is affected by other stats
            const healthPenalty = 
                (pet.hunger < 20 ? (20 - pet.hunger) * 0.5 : 0) +
                (pet.energy < 10 ? (10 - pet.energy) * 0.5 : 0) +
                (pet.happiness < 30 ? (30 - pet.happiness) * 0.3 : 0) +
                (pet.cleanliness < 40 ? (40 - pet.cleanliness) * 0.2 : 0);
            
            pet.health = Math.max(0, Math.min(100, pet.health - (timeDiff * 0.05 + healthPenalty * timeDiff * 0.01)));
            
            // Gain experience over time
            pet.experience += timeDiff * 0.1 * pet.traits.growthRate;
            
            // Check for level up
            while (pet.experience >= 100 * pet.level && pet.health > 0) {
                pet.experience -= 100 * pet.level;
                pet.level++;
                addToLog('System', `${pet.name} reached level ${pet.level}!`);
                
                // Check for evolution at level 5
                if (pet.level === 5 && petTypes[pet.type].evolutions) {
                    triggerEvolution(pet);
                    return; // Stop further processing as pet will evolve
                }
            }
            
            // Check for death
            if (pet.health <= 0) {
                addToLog('System', `${pet.name} has died!`, true);
                gameState.pets.splice(gameState.pets.indexOf(pet), 1);
                
                if (gameState.pets.length === 0) {
                    addToLog('System', 'All your pets have died. Game over!', true);
                    setTimeout(() => {
                        backToMainMenu();
                    }, 3000);
                } else {
                    gameState.currentPetIndex = Math.min(gameState.currentPetIndex, gameState.pets.length - 1);
                }
            }
            
            // Update last updated time
            pet.lastUpdated = Date.now();
        }
        
        // Trigger pet evolution
        function triggerEvolution(pet) {
            const possibleEvolutions = petTypes[pet.type].evolutions;
            if (!possibleEvolutions || possibleEvolutions.length === 0) return;
            
            // Select random evolution
            const newType = possibleEvolutions[Math.floor(Math.random() * possibleEvolutions.length)];
            
            // Show evolution screen
            elements.gameScreen.classList.add('hidden');
            elements.evolutionScreen.classList.remove('hidden');
            
            // Display evolution info
            elements.evolutionInfo.innerHTML = `
                <p>${pet.name} is evolving!</p>
                <p>From ${petTypes[pet.type].name} to ${petTypes[newType].name}!</p>
                <p>This is evolution #${pet.evolutionCount + 1} for this lineage.</p>
            `;
            
            // Save the evolution data for when we continue
            gameState.evolvingPet = pet;
            gameState.newType = newType;
        }
        
        // Continue after evolution
        function continueAfterEvolution() {
            const pet = gameState.evolvingPet;
            const newType = gameState.newType;
            
            // Create two new pets from the evolved one
            const newPet1 = createNewPet(newType, {
                ...pet.traits,
                name: `${pet.name}-A`,
                evolutionCount: pet.evolutionCount + 1,
                generation: pet.generation
            });
            
            const newPet2 = createNewPet(newType, {
                ...pet.traits,
                name: `${pet.name}-B`,
                evolutionCount: pet.evolutionCount + 1,
                generation: pet.generation
            });
            
            // Replace the old pet with two new ones
            const petIndex = gameState.pets.indexOf(pet);
            gameState.pets.splice(petIndex, 1, newPet1, newPet2);
            
            // Reset current pet index
            gameState.currentPetIndex = petIndex;
            
            // Update UI
            elements.evolutionScreen.classList.add('hidden');
            elements.gameScreen.classList.remove('hidden');
            updateGameScreen();
            
            addToLog('System', `${pet.name} divided into ${newPet1.name} and ${newPet2.name}!`);
        }
        
        // Perform an action on the current pet
        function performAction(action) {
            if (gameState.pets.length === 0) return;
            
            const pet = gameState.pets[gameState.currentPetIndex];
            
            switch (action) {
                case 'feed':
                    pet.hunger = Math.min(100, pet.hunger + 30);
                    pet.cleanliness = Math.max(0, pet.cleanliness - 5);
                    addToLog('Action', `You fed ${pet.name}. Hunger +30, Cleanliness -5`);
                    break;
                
                case 'play':
                    pet.happiness = Math.min(100, pet.happiness + 25);
                    pet.energy = Math.max(0, pet.energy - 15);
                    pet.hunger = Math.max(0, pet.hunger - 5);
                    addToLog('Action', `You played with ${pet.name}. Happiness +25, Energy -15, Hunger -5`);
                    break;
                
                case 'clean':
                    pet.cleanliness = Math.min(100, pet.cleanliness + 40);
                    pet.happiness = Math.max(0, pet.happiness - 10);
                    addToLog('Action', `You cleaned ${pet.name}. Cleanliness +40, Happiness -10`);
                    break;
                
                case 'sleep':
                    pet.energy = Math.min(100, pet.energy + 50);
                    pet.hunger = Math.max(0, pet.hunger - 20);
                    pet.happiness = Math.max(0, pet.happiness - 5);
                    addToLog('Action', `${pet.name} slept. Energy +50, Hunger -20, Happiness -5`);
                    break;
                
                case 'train':
                    const expGain = 10 + Math.random() * 5;
                    pet.experience += expGain;
                    pet.energy = Math.max(0, pet.energy - 20);
                    pet.hunger = Math.max(0, pet.hunger - 10);
                    addToLog('Action', `You trained ${pet.name}. Experience +${Math.round(expGain)}, Energy -20, Hunger -10`);
                    break;
            }
            
            // Update UI
            updateGameScreen();
        }
        
        // Add message to game log
        function addToLog(source, message, isImportant = false) {
            const now = new Date();
            const timeString = `[${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}]`;
            
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            if (isImportant) {
                logEntry.style.fontWeight = 'bold';
                logEntry.style.color = '#F44336';
            }
            
            logEntry.innerHTML = `<span class="log-time">[${source}]</span> ${message}`;
            elements.gameLog.appendChild(logEntry);
            
            // Scroll to bottom
            elements.gameLog.scrollTop = elements.gameLog.scrollHeight;
            
            // Add to game state log (keep only last 50 messages)
            gameState.gameLog.push({ source, message, time: now, isImportant });
            if (gameState.gameLog.length > 50) {
                gameState.gameLog.shift();
            }
        }
        
        // Save game state to localStorage
        function saveGame() {
            localStorage.setItem('evolutionTamagotchi', JSON.stringify(gameState));
        }
        
        // Initialize the game when the page loads
        window.addEventListener('load', init);
    </script>
</body>
</html>