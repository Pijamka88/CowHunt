<!DOCTYPE html>
<html>
<head>
    <title>Cosmic Cow Hunt</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #1a082a;
            touch-action: none;
            font-family: 'Arial', sans-serif;
            color: white;
        }

        .screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            display: none;
        }

        .menu-btn {
            padding: 15px 30px;
            margin: 10px;
            font-size: 20px;
            background: linear-gradient(45deg, #6a1b9a, #9c27b0);
            border: none;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .menu-btn:hover {
            transform: scale(1.1);
        }

        #gameCanvas {
            position: absolute;
            top: 0;
            left: 0;
        }

        .hud {
            position: fixed;
            padding: 10px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
        }

        #topHUD {
            top: 20px;
            left: 20px;
            display: flex;
            gap: 20px;
        }

        #bottomHUD {
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 30px;
        }

        .heart {
            width: 30px;
            height: 30px;
            background: #e91e63;
            clip-path: polygon(50% 0%, 100% 25%, 80% 75%, 50% 100%, 20% 75%, 0% 25%);
        }

        #reloadStatus {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            color: #ff4081;
            text-shadow: 0 0 10px #ff4081;
            display: none;
        }

        #leaderboard {
            list-style: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="mainMenu" class="screen">
        <h1>üêÆ Cosmic Cow Hunt üöÄ</h1>
        <button class="menu-btn" onclick="showScreen('game')">Start Game</button>
        <button class="menu-btn" onclick="showScreen('howToPlay')">How to Play</button>
        <button class="menu-btn" onclick="showScreen('highScores')">High Scores</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª -->
    <div id="howToPlay" class="screen">
        <h2>How to Play</h2>
        <p>üî´ Shoot cosmic cows in 60 seconds!</p>
        <p>üéØ 1 tap = 1 bullet (5 bullets total)</p>
        <p>üíî 3 missed cows = game over</p>
        <p>üí• Different cows give different points</p>
        <button class="menu-btn" onclick="showScreen('mainMenu')">Back</button>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤ -->
    <div id="highScores" class="screen">
        <h2>Top 5 Scores</h2>
        <ul id="leaderboard"></ul>
        <button class="menu-btn" onclick="showScreen('mainMenu')">Back</button>
    </div>

    <!-- –ò–≥—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
    <canvas id="gameCanvas"></canvas>
    <div id="topHUD" class="hud">
        <div>Score: <span id="score">0</span></div>
        <div id="lives"></div>
    </div>
    <div id="bottomHUD" class="hud">
        <div>Ammo: <span id="ammo">5</span></div>
        <div>Hits: <span id="hits">0</span></div>
        <div>Miss: <span id="miss">0</span></div>
        <div>Time: <span id="timer">60</span>s</div>
    </div>
    <div id="reloadStatus">RELOADING...</div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;

        let gameState = {
            active: false,
            score: 0,
            lives: 3,
            ammo: 5,
            hits: 0,
            miss: 0,
            timeLeft: 60,
            reloading: false,
            cows: [],
            stars: [],
            cowTypes: [
                { color: '#6a1b9a', speed: 3, points: 100, pattern: 'sin' },
                { color: '#9c27b0', speed: 5, points: 200, pattern: 'spiral' },
                { color: '#e91e63', speed: 4, points: 150, pattern: 'zigzag' }
            ]
        };

        class CosmicCow {
            constructor() {
                const type = gameState.cowTypes[Math.floor(Math.random() * gameState.cowTypes.length)];
                this.type = type;
                this.side = Math.random() < 0.5 ? 'left' : 'right';
                this.x = this.side === 'left' ? -50 : width + 50;
                this.y = Math.random() * (height - 100) + 50;
                this.angle = 0;
                this.radius = 40;
            }

            update() {
                const speed = this.type.speed * (this.side === 'left' ? 1 : -1);
                
                switch(this.type.pattern) {
                    case 'sin':
                        this.x += speed;
                        this.y += Math.sin(this.angle) * 2;
                        break;
                    case 'spiral':
                        this.x += Math.cos(this.angle) * speed;
                        this.y += Math.sin(this.angle) * speed/2;
                        break;
                    case 'zigzag':
                        this.x += speed;
                        this.y += Math.sin(this.angle) * 4;
                        break;
                }
                
                this.angle += 0.05;
            }

            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                
                // –¢–µ–ª–æ
                ctx.fillStyle = this.type.color;
                ctx.fillRect(-30, -15, 60, 30);
                
                // –ì–æ–ª–æ–≤–∞
                ctx.beginPath();
                ctx.arc(25, 0, 15, 0, Math.PI * 2);
                ctx.fill();
                
                // –ö—Ä—ã–ª—å—è
                ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                ctx.fillRect(-40, -10, 20, 40);
                ctx.fillRect(-40, -30, 20, 40);
                
                ctx.restore();
            }
        }

        function updateGame() {
            if(!gameState.active) return;

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–æ–≤
            gameState.cows.forEach((cow, i) => {
                cow.update();
                if(cow.x < -100 || cow.x > width + 100) {
                    gameState.cows.splice(i, 1);
                    gameState.miss++;
                    document.getElementById('miss').textContent = gameState.miss;
                    if(gameState.miss % 3 === 0) loseLife();
                }
            });

            // –°–ø–∞–≤–Ω –Ω–æ–≤—ã—Ö –∫–æ—Ä–æ–≤
            if(Math.random() < 0.03) gameState.cows.push(new CosmicCow());

            // –¢–∞–π–º–µ—Ä
            gameState.timeLeft -= 1/60;
            document.getElementById('timer').textContent = Math.ceil(gameState.timeLeft);
            
            if(gameState.timeLeft <= 0) gameOver();
        }

        function drawGame() {
            ctx.fillStyle = 'rgba(26, 8, 42, 0.1)';
            ctx.fillRect(0, 0, width, height);
            
            // –§–æ–Ω–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
            ctx.fillStyle = 'rgba(106, 27, 154, 0.05)';
            ctx.fillRect(0, 0, width, height);
            
            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ—Ä–æ–≤
            gameState.cows.forEach(cow => cow.draw());
        }

        function gameLoop() {
            updateGame();
            drawGame();
            if(gameState.active) requestAnimationFrame(gameLoop);
        }

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById(screenId === 'mainMenu' ? 'mainMenu' : screenId).style.display = 'block';
            
            if(screenId === 'highScores') updateLeaderboard();
            if(screenId === 'game') startGame();
        }

        function startGame() {
            gameState = {
                ...gameState,
                active: true,
                score: 0,
                lives: 3,
                ammo: 5,
                hits: 0,
                miss: 0,
                timeLeft: 60,
                cows: []
            };

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è HUD
            document.getElementById('score').textContent = '0';
            document.getElementById('ammo').textContent = '5';
            document.getElementById('hits').textContent = '0';
            document.getElementById('miss').textContent = '0';
            document.getElementById('lives').innerHTML = Array(3).fill('<div class="heart"></div>').join('');
            
            gameLoop();
        }

        function loseLife() {
            gameState.lives--;
            document.getElementById('lives').children[gameState.lives].style.opacity = '0.3';
            if(gameState.lives <= 0) gameOver();
        }

        function gameOver() {
            gameState.active = false;
            showScreen('mainMenu');
            saveScore();
        }

        function saveScore() {
            const leaderboard = JSON.parse(localStorage.getItem('leaderboard') || [];
            const newEntry = { score: gameState.score, name: 'Player' };
            
            leaderboard.push(newEntry);
            leaderboard.sort((a, b) => b.score - a.score);
            localStorage.setItem('leaderboard', JSON.stringify(leaderboard.slice(0, 5)));
        }

        function updateLeaderboard() {
            const leaderboard = JSON.parse(localStorage.getItem('leaderboard')) || [];
            const list = document.getElementById('leaderboard');
            list.innerHTML = leaderboard.slice(0,5).map((entry, i) => 
                `<li>${i+1}. ${entry.name}: ${entry.score}</li>`
            ).join('');
        }

        canvas.addEventListener('click', e => {
            if(!gameState.active || gameState.reloading || gameState.ammo <= 0) return;

            gameState.ammo--;
            document.getElementById('ammo').textContent = gameState.ammo;
            
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            gameState.cows.forEach((cow, i) => {
                const dx = mouseX - cow.x;
                const dy = mouseY - cow.y;
                if(Math.sqrt(dx*dx + dy*dy) < cow.radius) {
                    gameState.score += cow.type.points;
                    gameState.hits++;
                    document.getElementById('score').textContent = gameState.score;
                    document.getElementById('hits').textContent = gameState.hits;
                    gameState.cows.splice(i, 1);
                }
            });

            if(gameState.ammo === 0) {
                gameState.reloading = true;
                document.getElementById('reloadStatus').style.display = 'block';
                setTimeout(() => {
                    gameState.ammo = 5;
                    gameState.reloading = false;
                    document.getElementById('ammo').textContent = '5';
                    document.getElementById('reloadStatus').style.display = 'none';
                }, 2000);
            }
        });

        window.addEventListener('resize', () => {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        showScreen('mainMenu');
        updateLeaderboard();
    </script>
</body>
</html>