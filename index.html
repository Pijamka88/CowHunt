<!DOCTYPE html>
<html>
<head>
    <title>Cosmic Cow Hunt</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            touch-action: none;
            background: #000033;
            font-family: 'Arial', sans-serif;
            color: white;
        }
        #gameCanvas {
            background: #000033;
            display: block;
        }
        .menu {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 51, 0.9);
            padding: 40px;
            color: white;
            text-align: center;
            border-radius: 20px;
            border: 2px solid #3399ff;
            z-index: 1000;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 0 30px rgba(51, 153, 255, 0.7);
        }
        .menu h1 {
            color: #fff;
            margin: 0 0 25px 0;
            text-shadow: 3px 3px 3px #ff69b4;
            font-size: 2.5em;
        }
        .menu button {
            padding: 15px 30px;
            font-size: 1.2em;
            margin: 15px;
            cursor: pointer;
            background: linear-gradient(to bottom, #3399ff, #0066cc);
            border: none;
            color: white;
            border-radius: 10px;
            transition: all 0.3s;
        }
        .menu button:hover {
            background: linear-gradient(to bottom, #0066cc, #3399ff);
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(51, 153, 255, 0.7);
        }
        #hud {
            position: fixed;
            top: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            background: rgba(0, 0, 51, 0.7);
            padding: 10px 20px;
            border-radius: 10px;
            border: 1px solid #3399ff;
        }
        .hud-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .heart {
            color: #ff3366;
            text-shadow: 0 0 10px #ff3366;
            font-size: 28px;
            transition: all 0.3s;
        }
        .heart.burned {
            color: #666;
            text-shadow: none;
        }
        #level {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 51, 0.7);
            padding: 8px 20px;
            border-radius: 10px;
            border: 1px solid #3399ff;
        }
    </style>
</head>
<body>
    <div id="mainMenu" class="menu">
        <h1>Cosmic Cow Hunt</h1>
        <button onclick="startGame()">Start Game</button>
        <button onclick="showInstructions()">Instructions</button>
    </div>

    <div id="hud">
        <div class="hud-item">
            <div>Score: <span id="score">0</span></div>
            <div>Lives: <span id="lives"><span class="heart">♥</span><span class="heart">♥</span><span class="heart">♥</span></span></div>
        </div>
        <div class="hud-item">
            <div>Time: <span id="timer">1:00</span></div>
            <div>Ammo: <span id="ammo">5/5</span></div>
        </div>
    </div>

    <div id="level">Level: <span id="currentLevel">1</span></div>

    <canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let gameActive = false, cows = [], shots = [], planets = [], level = 1;
let score = 0, lives = 3, timeLeft = 60, ammo = 5, isReloading = false;

const config = {
    cowSpeed: 2 + level,
    spawnInterval: 1500 - level*100,
    maxCows: 3 + Math.floor(level/2),
    cowWidth: 80,
    cowHeight: 40,
    reloadTime: 2000
};

class Cow {
    constructor() {
        this.direction = Math.random() > 0.5 ? 1 : -1;
        this.x = this.direction === 1 ? -100 : canvas.width + 100;
        this.y = Math.random() * (canvas.height - 100) + 50;
        this.speed = config.cowSpeed;
        this.legPhase = 0;
        this.wingPhase = 0;
        this.alive = true;
        this.color = '#ffffff';
    }

    update() {
        if(!this.alive) {
            this.y += 3;
            return;
        }
        
        this.x += this.direction * this.speed;
        this.legPhase = (this.legPhase + 0.1) % (Math.PI * 2);
        this.wingPhase = (this.wingPhase + 0.08) % (Math.PI * 2);
        
        if(this.x < -200 || this.x > canvas.width + 200) this.reset();
    }

    draw() {
        ctx.save();
        if(this.direction === -1) {
            ctx.translate(this.x, this.y);
            ctx.scale(-1, 1);
            ctx.translate(-this.x, -this.y);
        }

        // Body
        ctx.fillStyle = this.alive ? this.color : '#666';
        ctx.beginPath();
        ctx.roundRect(this.x - 40, this.y - 20, 80, 40, 10);
        ctx.fill();

        // Head
        ctx.beginPath();
        ctx.arc(this.x + 30, this.y, 15, 0, Math.PI * 2);
        ctx.fill();

        // Nose
        ctx.fillStyle = '#f4a460';
        ctx.beginPath();
        ctx.ellipse(this.x + 30, this.y + 5, 8, 5, 0, 0, Math.PI * 2);
        ctx.fill();
        
        // Nostrils
        ctx.fillStyle = '#000';
        ctx.beginPath();
        ctx.arc(this.x + 27, this.y + 5, 2, 0, Math.PI * 2);
        ctx.arc(this.x + 33, this.y + 5, 2, 0, Math.PI * 2);
        ctx.fill();

        // Eyes
        const eyeY = this.y - 5;
        ctx.fillStyle = '#fff';
        ctx.beginPath();
        ctx.arc(this.x + 35, eyeY, 6, 0, Math.PI * 2);
        ctx.arc(this.x + 25, eyeY, 6, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = '#3366ff';
        ctx.beginPath();
        ctx.arc(this.x + 35 + Math.cos(this.legPhase)*2, eyeY + Math.sin(this.legPhase)*2, 3, 0, Math.PI * 2);
        ctx.arc(this.x + 25 + Math.cos(this.legPhase)*2, eyeY + Math.sin(this.legPhase)*2, 3, 0, Math.PI * 2);
        ctx.fill();

        // Horns
        ctx.strokeStyle = '#ffcc99';
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(this.x + 30, this.y - 15);
        ctx.lineTo(this.x + 35, this.y - 25);
        ctx.moveTo(this.x + 30, this.y - 15);
        ctx.lineTo(this.x + 25, this.y - 25);
        ctx.stroke();

        // Legs
        const legOffset = Math.sin(this.legPhase) * 5;
        ctx.fillStyle = this.alive ? this.color : '#666';
        for(let i = 0; i < 4; i++) {
            ctx.fillRect(
                this.x - 30 + i*20, 
                this.y + 15 + (i%2 ? legOffset : -legOffset), 
                10, 
                20
            );
            ctx.fillStyle = '#000';
            ctx.fillRect(
                this.x - 30 + i*20, 
                this.y + 35 + (i%2 ? legOffset : -legOffset), 
                10, 
                5
            );
            ctx.fillStyle = this.alive ? this.color : '#666';
        }

        // Wings
        ctx.strokeStyle = `rgba(200, 200, 255, ${Math.abs(Math.sin(this.wingPhase))}`;
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(this.x - 10, this.y - 15);
        ctx.quadraticCurveTo(
            this.x - 50 - Math.sin(this.wingPhase)*20, 
            this.y - 50, 
            this.x - 10, 
            this.y - 40
        );
        ctx.stroke();

        if(!this.alive) {
            ctx.strokeStyle = '#ff0000';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(this.x + 20, eyeY - 3);
            ctx.lineTo(this.x + 30, eyeY + 3);
            ctx.moveTo(this.x + 30, eyeY - 3);
            ctx.lineTo(this.x + 20, eyeY + 3);
            ctx.stroke();
        }

        ctx.restore();
    }

    reset() {
        this.direction *= -1;
        this.x = this.direction === 1 ? -100 : canvas.width + 100;
        this.y = Math.random() * (canvas.height - 100) + 50;
    }
}

function initPlanets() {
    planets = [];
    while(planets.length < 3) {
        let newPlanet = {
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            radius: Math.random() * 40 + 30,
            color: Math.random() > 0.5 ? '#3399ff' : '#ffcc00'
        };
        
        let valid = true;
        for(let p of planets) {
            if(distance(newPlanet.x, newPlanet.y, p.x, p.y) < newPlanet.radius + p.radius) {
                valid = false;
                break;
            }
        }
        if(valid) planets.push(newPlanet);
    }
}

function distance(x1, y1, x2, y2) {
    return Math.sqrt((x2-x1)**2 + (y2-y1)**2);
}

function gameLoop() {
    if(!gameActive) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Draw planets
    ctx.globalAlpha = 0.3;
    planets.forEach(p => {
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fill();
    });
    ctx.globalAlpha = 1;

    cows.forEach(cow => {
        cow.update();
        cow.draw();
    });

    shots.forEach((shot, i) => {
        shot.alpha -= 0.05;
        if(shot.alpha <= 0) shots.splice(i, 1);
        ctx.fillStyle = `rgba(255,255,255,${shot.alpha})`;
        ctx.beginPath();
        ctx.arc(shot.x, shot.y, 8, 0, Math.PI * 2);
        ctx.fill();
    });

    requestAnimationFrame(gameLoop);
}

function startGame() {
    gameActive = true;
    document.getElementById('mainMenu').style.display = 'none';
    score = 0;
    lives = 3;
    level = 1;
    timeLeft = 60;
    ammo = 5;
    cows = [];
    shots = [];
    initPlanets();
    updateHUD();
    spawnCow();
    gameLoop();
    const timer = setInterval(() => {
        timeLeft--;
        if(timeLeft <= 0) endGame();
        updateHUD();
    }, 1000);
}

function updateHUD() {
    document.getElementById('score').textContent = score;
    document.getElementById('timer').textContent = `${Math.floor(timeLeft/60)}:${(timeLeft%60).toString().padStart(2,'0')}`;
    document.getElementById('ammo').textContent = `${ammo}/5`;
    document.getElementById('currentLevel').textContent = level;
    
    const hearts = document.querySelectorAll('.heart');
    hearts.forEach((h, i) => h.classList.toggle('burned', i >= lives));
}

canvas.addEventListener('click', e => {
    if(!gameActive || isReloading) return;
    
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    
    if(ammo <= 0) {
        isReloading = true;
        setTimeout(() => {
            ammo = 5;
            isReloading = false;
            updateHUD();
        }, config.reloadTime);
        return;
    }

    ammo--;
    shots.push({x, y, alpha: 1});
    
    cows.forEach(cow => {
        if(!cow.alive) return;
        if(x > cow.x - 50 && x < cow.x + 50 && y > cow.y - 30 && y < cow.y + 30) {
            cow.alive = false;
            score += 100;
            if(score % 500 === 0) levelUp();
        }
    });
    
    updateHUD();
});

function levelUp() {
    level++;
    config.cowSpeed += 0.5;
    config.spawnInterval = Math.max(500, 1500 - level*100);
    config.maxCows = 3 + Math.floor(level/2);
}

function spawnCow() {
    if(!gameActive || cows.length >= config.maxCows) return;
    cows.push(new Cow());
    setTimeout(spawnCow, config.spawnInterval);
}

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    initPlanets();
}

window.addEventListener('resize', resize);
resize();
</script>
</body>
</html>